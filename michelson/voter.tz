parameter (or (or (pair %claim_bribe (nat %token_id) (pair (nat %epoch) (pair (address %amm) (nat %bribe_id)))) (or (pair %claim_fee (nat %token_id) (pair (nat %epoch) (address %amm))) (unit %next_epoch))) (or (pair %pull_amm_fee (address %amm) (nat %epoch)) (or (pair %recharge_gauge (address %amm) (nat %epoch)) (pair %vote (nat %token_id) (list %vote_items (pair (address %amm) (nat %votes)))))));
storage   (pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))));
code
  {
    UNPAIR;     # @parameter : @storage
    IF_LEFT
      {
        IF_LEFT
          {
            # == claim_bribe ==
            # sp.verify(self.data.epoch > params.epoch, 'INVALID_EPOCH') # @parameter%claim_bribe : @storage
            DUP;        # @parameter%claim_bribe : @parameter%claim_bribe : @storage
            GET 3;      # nat : @parameter%claim_bribe : @storage
            DUP 3;      # @storage : nat : @parameter%claim_bribe : @storage
            CAR;        # pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : nat : @parameter%claim_bribe : @storage
            GET 3;      # nat : nat : @parameter%claim_bribe : @storage
            COMPARE;    # int : @parameter%claim_bribe : @storage
            GT;         # bool : @parameter%claim_bribe : @storage
            IF
              {}
              {
                PUSH string "INVALID_EPOCH"; # string : @parameter%claim_bribe : @storage
                FAILWITH;   # FAILED
              }; # @parameter%claim_bribe : @storage
            SWAP;       # @storage : @parameter%claim_bribe
            # sp.verify(self.data.amm_to_gauge_bribe.contains(params.amm), 'AMM_INVALID_OR_NOT_WHITELISTED') # @storage : @parameter%claim_bribe
            DUP;        # @storage : @storage : @parameter%claim_bribe
            DUG 2;      # @storage : @parameter%claim_bribe : @storage
            CAR;        # pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : @parameter%claim_bribe : @storage
            CAR;        # pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real))) : @parameter%claim_bribe : @storage
            CAR;        # big_map address (pair (address %gauge) (address %bribe)) : @parameter%claim_bribe : @storage
            SWAP;       # @parameter%claim_bribe : big_map address (pair (address %gauge) (address %bribe)) : @storage
            DUP;        # @parameter%claim_bribe : @parameter%claim_bribe : big_map address (pair (address %gauge) (address %bribe)) : @storage
            DUG 2;      # @parameter%claim_bribe : big_map address (pair (address %gauge) (address %bribe)) : @parameter%claim_bribe : @storage
            GET 5;      # address : big_map address (pair (address %gauge) (address %bribe)) : @parameter%claim_bribe : @storage
            MEM;        # bool : @parameter%claim_bribe : @storage
            IF
              {}
              {
                PUSH string "AMM_INVALID_OR_NOT_WHITELISTED"; # string : @parameter%claim_bribe : @storage
                FAILWITH;   # FAILED
              }; # @parameter%claim_bribe : @storage
            SWAP;       # @storage : @parameter%claim_bribe
            # sp.verify(sp.view("is_owner", self.data.ve_address, sp.record(address = sp.sender, token_id = params.token_id), sp.TBool).open_some(message = 'INVALID_VIEW'), 'SENDER_DOES_NOT_OWN_LOCK') # @storage : @parameter%claim_bribe
            DUP;        # @storage : @storage : @parameter%claim_bribe
            DUG 2;      # @storage : @parameter%claim_bribe : @storage
            GET 8;      # address : @parameter%claim_bribe : @storage
            SWAP;       # @parameter%claim_bribe : address : @storage
            DUP;        # @parameter%claim_bribe : @parameter%claim_bribe : address : @storage
            DUG 2;      # @parameter%claim_bribe : address : @parameter%claim_bribe : @storage
            CAR;        # nat : address : @parameter%claim_bribe : @storage
            SENDER;     # @sender : nat : address : @parameter%claim_bribe : @storage
            PAIR;       # pair @sender nat : address : @parameter%claim_bribe : @storage
            VIEW "is_owner" bool; # option bool : @parameter%claim_bribe : @storage
            IF_NONE
              {
                PUSH string "INVALID_VIEW"; # string : @parameter%claim_bribe : @storage
                FAILWITH;   # FAILED
              }
              {}; # @some : @parameter%claim_bribe : @storage
            IF
              {}
              {
                PUSH string "SENDER_DOES_NOT_OWN_LOCK"; # string : @parameter%claim_bribe : @storage
                FAILWITH;   # FAILED
              }; # @parameter%claim_bribe : @storage
            # sp.transfer(sp.record(token_id = params.token_id, owner = sp.sender, epoch = params.epoch, bribe_id = params.bribe_id, weight_share = (self.data.token_amm_votes[sp.record(token_id = params.token_id, amm = params.amm, epoch = params.epoch)] * 1000000000000000000) // self.data.total_amm_votes[sp.record(amm = params.amm, epoch = params.epoch)]), sp.tez(0), sp.contract(sp.TRecord(bribe_id = sp.TNat, epoch = sp.TNat, owner = sp.TAddress, token_id = sp.TNat, weight_share = sp.TNat).layout(("token_id", ("owner", ("epoch", ("bribe_id", "weight_share"))))), self.data.amm_to_gauge_bribe[params.amm].bribe, entry_point='claim').open_some()) # @parameter%claim_bribe : @storage
            NIL operation; # list operation : @parameter%claim_bribe : @storage
            DUP;        # list operation : list operation : @parameter%claim_bribe : @storage
            DUP 4;      # @storage : list operation : list operation : @parameter%claim_bribe : @storage
            CAR;        # pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : list operation : list operation : @parameter%claim_bribe : @storage
            CAR;        # pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real))) : list operation : list operation : @parameter%claim_bribe : @storage
            CAR;        # big_map address (pair (address %gauge) (address %bribe)) : list operation : list operation : @parameter%claim_bribe : @storage
            DUP 4;      # @parameter%claim_bribe : big_map address (pair (address %gauge) (address %bribe)) : list operation : list operation : @parameter%claim_bribe : @storage
            GET 5;      # address : big_map address (pair (address %gauge) (address %bribe)) : list operation : list operation : @parameter%claim_bribe : @storage
            GET;        # option (pair (address %gauge) (address %bribe)) : list operation : list operation : @parameter%claim_bribe : @storage
            IF_NONE
              {
                PUSH int 336; # int : list operation : list operation : @parameter%claim_bribe : @storage
                FAILWITH;   # FAILED
              }
              {}; # @some : list operation : list operation : @parameter%claim_bribe : @storage
            CDR;        # address : list operation : list operation : @parameter%claim_bribe : @storage
            CONTRACT %claim (pair (nat %token_id) (pair (address %owner) (pair (nat %epoch) (pair (nat %bribe_id) (nat %weight_share))))); # option (contract (pair (nat %token_id) (pair (address %owner) (pair (nat %epoch) (pair (nat %bribe_id) (nat %weight_share)))))) : list operation : list operation : @parameter%claim_bribe : @storage
            IF_NONE
              {
                PUSH int 336; # int : list operation : list operation : @parameter%claim_bribe : @storage
                FAILWITH;   # FAILED
              }
              {}; # @some : list operation : list operation : @parameter%claim_bribe : @storage
            PUSH mutez 0; # mutez : @some : list operation : list operation : @parameter%claim_bribe : @storage
            DUP 6;      # @storage : mutez : @some : list operation : list operation : @parameter%claim_bribe : @storage
            GET 3;      # pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) : mutez : @some : list operation : list operation : @parameter%claim_bribe : @storage
            GET 4;      # big_map (pair (address %amm) (nat %epoch)) nat : mutez : @some : list operation : list operation : @parameter%claim_bribe : @storage
            DIG 5;      # @parameter%claim_bribe : big_map (pair (address %amm) (nat %epoch)) nat : mutez : @some : list operation : list operation : @storage
            DUP;        # @parameter%claim_bribe : @parameter%claim_bribe : big_map (pair (address %amm) (nat %epoch)) nat : mutez : @some : list operation : list operation : @storage
            GET 3;      # nat : @parameter%claim_bribe : big_map (pair (address %amm) (nat %epoch)) nat : mutez : @some : list operation : list operation : @storage
            SWAP;       # @parameter%claim_bribe : nat : big_map (pair (address %amm) (nat %epoch)) nat : mutez : @some : list operation : list operation : @storage
            DUP;        # @parameter%claim_bribe : @parameter%claim_bribe : nat : big_map (pair (address %amm) (nat %epoch)) nat : mutez : @some : list operation : list operation : @storage
            DUG 7;      # @parameter%claim_bribe : nat : big_map (pair (address %amm) (nat %epoch)) nat : mutez : @some : list operation : list operation : @parameter%claim_bribe : @storage
            GET 5;      # address : nat : big_map (pair (address %amm) (nat %epoch)) nat : mutez : @some : list operation : list operation : @parameter%claim_bribe : @storage
            PAIR;       # pair address nat : big_map (pair (address %amm) (nat %epoch)) nat : mutez : @some : list operation : list operation : @parameter%claim_bribe : @storage
            GET;        # option nat : mutez : @some : list operation : list operation : @parameter%claim_bribe : @storage
            IF_NONE
              {
                PUSH int 323; # int : mutez : @some : list operation : list operation : @parameter%claim_bribe : @storage
                FAILWITH;   # FAILED
              }
              {}; # @some : mutez : @some : list operation : list operation : @parameter%claim_bribe : @storage
            PUSH nat 1000000000000000000; # nat : @some : mutez : @some : list operation : list operation : @parameter%claim_bribe : @storage
            DUP 8;      # @storage : nat : @some : mutez : @some : list operation : list operation : @parameter%claim_bribe : @storage
            GET 3;      # pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) : nat : @some : mutez : @some : list operation : list operation : @parameter%claim_bribe : @storage
            GET 3;      # big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : nat : @some : mutez : @some : list operation : list operation : @parameter%claim_bribe : @storage
            DIG 7;      # @parameter%claim_bribe : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : nat : @some : mutez : @some : list operation : list operation : @storage
            DUP;        # @parameter%claim_bribe : @parameter%claim_bribe : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : nat : @some : mutez : @some : list operation : list operation : @storage
            GET 3;      # nat : @parameter%claim_bribe : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : nat : @some : mutez : @some : list operation : list operation : @storage
            SWAP;       # @parameter%claim_bribe : nat : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : nat : @some : mutez : @some : list operation : list operation : @storage
            DUP;        # @parameter%claim_bribe : @parameter%claim_bribe : nat : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : nat : @some : mutez : @some : list operation : list operation : @storage
            GET 5;      # address : @parameter%claim_bribe : nat : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : nat : @some : mutez : @some : list operation : list operation : @storage
            SWAP;       # @parameter%claim_bribe : address : nat : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : nat : @some : mutez : @some : list operation : list operation : @storage
            DUP;        # @parameter%claim_bribe : @parameter%claim_bribe : address : nat : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : nat : @some : mutez : @some : list operation : list operation : @storage
            DUG 10;     # @parameter%claim_bribe : address : nat : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : nat : @some : mutez : @some : list operation : list operation : @parameter%claim_bribe : @storage
            CAR;        # nat : address : nat : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : nat : @some : mutez : @some : list operation : list operation : @parameter%claim_bribe : @storage
            PAIR 3;     # pair nat (pair address nat) : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : nat : @some : mutez : @some : list operation : list operation : @parameter%claim_bribe : @storage
            GET;        # option nat : nat : @some : mutez : @some : list operation : list operation : @parameter%claim_bribe : @storage
            IF_NONE
              {
                PUSH int 320; # int : nat : @some : mutez : @some : list operation : list operation : @parameter%claim_bribe : @storage
                FAILWITH;   # FAILED
              }
              {}; # @some : nat : @some : mutez : @some : list operation : list operation : @parameter%claim_bribe : @storage
            MUL;        # nat : @some : mutez : @some : list operation : list operation : @parameter%claim_bribe : @storage
            EDIV;       # option (pair nat nat) : mutez : @some : list operation : list operation : @parameter%claim_bribe : @storage
            IF_NONE
              {
                PUSH int 325; # int : mutez : @some : list operation : list operation : @parameter%claim_bribe : @storage
                FAILWITH;   # FAILED
              }
              {
                CAR;        # nat : mutez : @some : list operation : list operation : @parameter%claim_bribe : @storage
              }; # nat : mutez : @some : list operation : list operation : @parameter%claim_bribe : @storage
            DIG 5;      # @parameter%claim_bribe : nat : mutez : @some : list operation : list operation : @storage
            DUP;        # @parameter%claim_bribe : @parameter%claim_bribe : nat : mutez : @some : list operation : list operation : @storage
            GET 6;      # nat : @parameter%claim_bribe : nat : mutez : @some : list operation : list operation : @storage
            SWAP;       # @parameter%claim_bribe : nat : nat : mutez : @some : list operation : list operation : @storage
            DUP;        # @parameter%claim_bribe : @parameter%claim_bribe : nat : nat : mutez : @some : list operation : list operation : @storage
            DUG 7;      # @parameter%claim_bribe : nat : nat : mutez : @some : list operation : list operation : @parameter%claim_bribe : @storage
            GET 3;      # nat : nat : nat : mutez : @some : list operation : list operation : @parameter%claim_bribe : @storage
            SENDER;     # @sender : nat : nat : nat : mutez : @some : list operation : list operation : @parameter%claim_bribe : @storage
            DUP 9;      # @parameter%claim_bribe : @sender : nat : nat : nat : mutez : @some : list operation : list operation : @parameter%claim_bribe : @storage
            CAR;        # nat : @sender : nat : nat : nat : mutez : @some : list operation : list operation : @parameter%claim_bribe : @storage
            PAIR 5;     # pair nat (pair @sender (pair nat (pair nat nat))) : mutez : @some : list operation : list operation : @parameter%claim_bribe : @storage
            DIG 4;      # list operation : pair nat (pair @sender (pair nat (pair nat nat))) : mutez : @some : list operation : @parameter%claim_bribe : @storage
            DROP;       # pair nat (pair @sender (pair nat (pair nat nat))) : mutez : @some : list operation : @parameter%claim_bribe : @storage
            DIG 4;      # @parameter%claim_bribe : pair nat (pair @sender (pair nat (pair nat nat))) : mutez : @some : list operation : @storage
            DROP;       # pair nat (pair @sender (pair nat (pair nat nat))) : mutez : @some : list operation : @storage
            TRANSFER_TOKENS; # operation : list operation : @storage
            CONS;       # list operation : @storage
          }
          {
            IF_LEFT
              {
                # == claim_fee ==
                # sp.verify(self.data.epoch > params.epoch, 'INVALID_EPOCH') # @parameter%claim_fee : @storage
                DUP;        # @parameter%claim_fee : @parameter%claim_fee : @storage
                GET 3;      # nat : @parameter%claim_fee : @storage
                DUP 3;      # @storage : nat : @parameter%claim_fee : @storage
                CAR;        # pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : nat : @parameter%claim_fee : @storage
                GET 3;      # nat : nat : @parameter%claim_fee : @storage
                COMPARE;    # int : @parameter%claim_fee : @storage
                GT;         # bool : @parameter%claim_fee : @storage
                IF
                  {}
                  {
                    PUSH string "INVALID_EPOCH"; # string : @parameter%claim_fee : @storage
                    FAILWITH;   # FAILED
                  }; # @parameter%claim_fee : @storage
                SWAP;       # @storage : @parameter%claim_fee
                # sp.verify(self.data.amm_to_gauge_bribe.contains(params.amm), 'AMM_INVALID_OR_NOT_WHITELISTED') # @storage : @parameter%claim_fee
                DUP;        # @storage : @storage : @parameter%claim_fee
                DUG 2;      # @storage : @parameter%claim_fee : @storage
                CAR;        # pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : @parameter%claim_fee : @storage
                CAR;        # pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real))) : @parameter%claim_fee : @storage
                CAR;        # big_map address (pair (address %gauge) (address %bribe)) : @parameter%claim_fee : @storage
                SWAP;       # @parameter%claim_fee : big_map address (pair (address %gauge) (address %bribe)) : @storage
                DUP;        # @parameter%claim_fee : @parameter%claim_fee : big_map address (pair (address %gauge) (address %bribe)) : @storage
                DUG 2;      # @parameter%claim_fee : big_map address (pair (address %gauge) (address %bribe)) : @parameter%claim_fee : @storage
                GET 4;      # address : big_map address (pair (address %gauge) (address %bribe)) : @parameter%claim_fee : @storage
                MEM;        # bool : @parameter%claim_fee : @storage
                IF
                  {}
                  {
                    PUSH string "AMM_INVALID_OR_NOT_WHITELISTED"; # string : @parameter%claim_fee : @storage
                    FAILWITH;   # FAILED
                  }; # @parameter%claim_fee : @storage
                SWAP;       # @storage : @parameter%claim_fee
                # sp.verify(sp.view("is_owner", self.data.ve_address, sp.record(address = sp.sender, token_id = params.token_id), sp.TBool).open_some(message = 'INVALID_VIEW'), 'SENDER_DOES_NOT_OWN_LOCK') # @storage : @parameter%claim_fee
                DUP;        # @storage : @storage : @parameter%claim_fee
                DUG 2;      # @storage : @parameter%claim_fee : @storage
                GET 8;      # address : @parameter%claim_fee : @storage
                SWAP;       # @parameter%claim_fee : address : @storage
                DUP;        # @parameter%claim_fee : @parameter%claim_fee : address : @storage
                DUG 2;      # @parameter%claim_fee : address : @parameter%claim_fee : @storage
                CAR;        # nat : address : @parameter%claim_fee : @storage
                SENDER;     # @sender : nat : address : @parameter%claim_fee : @storage
                PAIR;       # pair @sender nat : address : @parameter%claim_fee : @storage
                VIEW "is_owner" bool; # option bool : @parameter%claim_fee : @storage
                IF_NONE
                  {
                    PUSH string "INVALID_VIEW"; # string : @parameter%claim_fee : @storage
                    FAILWITH;   # FAILED
                  }
                  {}; # @some : @parameter%claim_fee : @storage
                IF
                  {}
                  {
                    PUSH string "SENDER_DOES_NOT_OWN_LOCK"; # string : @parameter%claim_fee : @storage
                    FAILWITH;   # FAILED
                  }; # @parameter%claim_fee : @storage
                # sp.transfer(sp.record(token_id = params.token_id, owner = sp.sender, amm = params.amm, epoch = params.epoch, weight_share = (self.data.token_amm_votes[sp.record(token_id = params.token_id, amm = params.amm, epoch = params.epoch)] * 1000000000000000000) // self.data.total_amm_votes[sp.record(amm = params.amm, epoch = params.epoch)]), sp.tez(0), sp.contract(sp.TRecord(amm = sp.TAddress, epoch = sp.TNat, owner = sp.TAddress, token_id = sp.TNat, weight_share = sp.TNat).layout(("token_id", ("owner", ("amm", ("epoch", "weight_share"))))), self.data.fee_distributor, entry_point='claim').open_some()) # @parameter%claim_fee : @storage
                NIL operation; # list operation : @parameter%claim_fee : @storage
                DUP;        # list operation : list operation : @parameter%claim_fee : @storage
                DUP 4;      # @storage : list operation : list operation : @parameter%claim_fee : @storage
                CAR;        # pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : list operation : list operation : @parameter%claim_fee : @storage
                GET 6;      # address : list operation : list operation : @parameter%claim_fee : @storage
                CONTRACT %claim (pair (nat %token_id) (pair (address %owner) (pair (address %amm) (pair (nat %epoch) (nat %weight_share))))); # option (contract (pair (nat %token_id) (pair (address %owner) (pair (address %amm) (pair (nat %epoch) (nat %weight_share)))))) : list operation : list operation : @parameter%claim_fee : @storage
                IF_NONE
                  {
                    PUSH int 384; # int : list operation : list operation : @parameter%claim_fee : @storage
                    FAILWITH;   # FAILED
                  }
                  {}; # @some : list operation : list operation : @parameter%claim_fee : @storage
                PUSH mutez 0; # mutez : @some : list operation : list operation : @parameter%claim_fee : @storage
                DUP 6;      # @storage : mutez : @some : list operation : list operation : @parameter%claim_fee : @storage
                GET 3;      # pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) : mutez : @some : list operation : list operation : @parameter%claim_fee : @storage
                GET 4;      # big_map (pair (address %amm) (nat %epoch)) nat : mutez : @some : list operation : list operation : @parameter%claim_fee : @storage
                DIG 5;      # @parameter%claim_fee : big_map (pair (address %amm) (nat %epoch)) nat : mutez : @some : list operation : list operation : @storage
                DUP;        # @parameter%claim_fee : @parameter%claim_fee : big_map (pair (address %amm) (nat %epoch)) nat : mutez : @some : list operation : list operation : @storage
                GET 3;      # nat : @parameter%claim_fee : big_map (pair (address %amm) (nat %epoch)) nat : mutez : @some : list operation : list operation : @storage
                SWAP;       # @parameter%claim_fee : nat : big_map (pair (address %amm) (nat %epoch)) nat : mutez : @some : list operation : list operation : @storage
                DUP;        # @parameter%claim_fee : @parameter%claim_fee : nat : big_map (pair (address %amm) (nat %epoch)) nat : mutez : @some : list operation : list operation : @storage
                DUG 7;      # @parameter%claim_fee : nat : big_map (pair (address %amm) (nat %epoch)) nat : mutez : @some : list operation : list operation : @parameter%claim_fee : @storage
                GET 4;      # address : nat : big_map (pair (address %amm) (nat %epoch)) nat : mutez : @some : list operation : list operation : @parameter%claim_fee : @storage
                PAIR;       # pair address nat : big_map (pair (address %amm) (nat %epoch)) nat : mutez : @some : list operation : list operation : @parameter%claim_fee : @storage
                GET;        # option nat : mutez : @some : list operation : list operation : @parameter%claim_fee : @storage
                IF_NONE
                  {
                    PUSH int 371; # int : mutez : @some : list operation : list operation : @parameter%claim_fee : @storage
                    FAILWITH;   # FAILED
                  }
                  {}; # @some : mutez : @some : list operation : list operation : @parameter%claim_fee : @storage
                PUSH nat 1000000000000000000; # nat : @some : mutez : @some : list operation : list operation : @parameter%claim_fee : @storage
                DUP 8;      # @storage : nat : @some : mutez : @some : list operation : list operation : @parameter%claim_fee : @storage
                GET 3;      # pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) : nat : @some : mutez : @some : list operation : list operation : @parameter%claim_fee : @storage
                GET 3;      # big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : nat : @some : mutez : @some : list operation : list operation : @parameter%claim_fee : @storage
                DIG 7;      # @parameter%claim_fee : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : nat : @some : mutez : @some : list operation : list operation : @storage
                DUP;        # @parameter%claim_fee : @parameter%claim_fee : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : nat : @some : mutez : @some : list operation : list operation : @storage
                GET 3;      # nat : @parameter%claim_fee : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : nat : @some : mutez : @some : list operation : list operation : @storage
                SWAP;       # @parameter%claim_fee : nat : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : nat : @some : mutez : @some : list operation : list operation : @storage
                DUP;        # @parameter%claim_fee : @parameter%claim_fee : nat : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : nat : @some : mutez : @some : list operation : list operation : @storage
                GET 4;      # address : @parameter%claim_fee : nat : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : nat : @some : mutez : @some : list operation : list operation : @storage
                SWAP;       # @parameter%claim_fee : address : nat : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : nat : @some : mutez : @some : list operation : list operation : @storage
                DUP;        # @parameter%claim_fee : @parameter%claim_fee : address : nat : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : nat : @some : mutez : @some : list operation : list operation : @storage
                DUG 10;     # @parameter%claim_fee : address : nat : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : nat : @some : mutez : @some : list operation : list operation : @parameter%claim_fee : @storage
                CAR;        # nat : address : nat : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : nat : @some : mutez : @some : list operation : list operation : @parameter%claim_fee : @storage
                PAIR 3;     # pair nat (pair address nat) : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : nat : @some : mutez : @some : list operation : list operation : @parameter%claim_fee : @storage
                GET;        # option nat : nat : @some : mutez : @some : list operation : list operation : @parameter%claim_fee : @storage
                IF_NONE
                  {
                    PUSH int 368; # int : nat : @some : mutez : @some : list operation : list operation : @parameter%claim_fee : @storage
                    FAILWITH;   # FAILED
                  }
                  {}; # @some : nat : @some : mutez : @some : list operation : list operation : @parameter%claim_fee : @storage
                MUL;        # nat : @some : mutez : @some : list operation : list operation : @parameter%claim_fee : @storage
                EDIV;       # option (pair nat nat) : mutez : @some : list operation : list operation : @parameter%claim_fee : @storage
                IF_NONE
                  {
                    PUSH int 373; # int : mutez : @some : list operation : list operation : @parameter%claim_fee : @storage
                    FAILWITH;   # FAILED
                  }
                  {
                    CAR;        # nat : mutez : @some : list operation : list operation : @parameter%claim_fee : @storage
                  }; # nat : mutez : @some : list operation : list operation : @parameter%claim_fee : @storage
                DIG 5;      # @parameter%claim_fee : nat : mutez : @some : list operation : list operation : @storage
                DUP;        # @parameter%claim_fee : @parameter%claim_fee : nat : mutez : @some : list operation : list operation : @storage
                GET 3;      # nat : @parameter%claim_fee : nat : mutez : @some : list operation : list operation : @storage
                SWAP;       # @parameter%claim_fee : nat : nat : mutez : @some : list operation : list operation : @storage
                DUP;        # @parameter%claim_fee : @parameter%claim_fee : nat : nat : mutez : @some : list operation : list operation : @storage
                DUG 7;      # @parameter%claim_fee : nat : nat : mutez : @some : list operation : list operation : @parameter%claim_fee : @storage
                GET 4;      # address : nat : nat : mutez : @some : list operation : list operation : @parameter%claim_fee : @storage
                SENDER;     # @sender : address : nat : nat : mutez : @some : list operation : list operation : @parameter%claim_fee : @storage
                DUP 9;      # @parameter%claim_fee : @sender : address : nat : nat : mutez : @some : list operation : list operation : @parameter%claim_fee : @storage
                CAR;        # nat : @sender : address : nat : nat : mutez : @some : list operation : list operation : @parameter%claim_fee : @storage
                PAIR 5;     # pair nat (pair @sender (pair address (pair nat nat))) : mutez : @some : list operation : list operation : @parameter%claim_fee : @storage
                DIG 4;      # list operation : pair nat (pair @sender (pair address (pair nat nat))) : mutez : @some : list operation : @parameter%claim_fee : @storage
                DROP;       # pair nat (pair @sender (pair address (pair nat nat))) : mutez : @some : list operation : @parameter%claim_fee : @storage
                DIG 4;      # @parameter%claim_fee : pair nat (pair @sender (pair address (pair nat nat))) : mutez : @some : list operation : @storage
                DROP;       # pair nat (pair @sender (pair address (pair nat nat))) : mutez : @some : list operation : @storage
                TRANSFER_TOKENS; # operation : list operation : @storage
                CONS;       # list operation : @storage
              }
              {
                DROP;       # @storage
                # == next_epoch ==
                # if self.data.epoch == 0: # @storage
                DUP;        # @storage : @storage
                CAR;        # pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : @storage
                GET 3;      # nat : @storage
                PUSH nat 0; # nat : nat : @storage
                COMPARE;    # int : @storage
                EQ;         # bool : @storage
                IF
                  {
                    # self.data.emission.genesis = ((sp.as_nat(sp.now - sp.timestamp(0)) + 604800) // 604800) * 604800 # @storage
                    UNPAIR;     # pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    UNPAIR;     # pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real))) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    UNPAIR;     # big_map address (pair (address %gauge) (address %bribe)) : pair (nat %base) (pair (nat %genesis) (nat %real)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    SWAP;       # pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    PUSH nat 604800; # nat : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    DUP;        # nat : nat : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    DUP;        # nat : nat : nat : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    PUSH timestamp "1970-01-01T00:00:00Z"; # timestamp : nat : nat : nat : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    NOW;        # @now : timestamp : nat : nat : nat : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    SUB;        # int : nat : nat : nat : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    ISNAT;      # option nat : nat : nat : nat : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    IF_NONE
                      {
                        PUSH int 179; # int : nat : nat : nat : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                        FAILWITH;   # FAILED
                      }
                      {}; # @some : nat : nat : nat : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    ADD;        # nat : nat : nat : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    EDIV;       # option (pair nat nat) : nat : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    IF_NONE
                      {
                        PUSH int 180; # int : nat : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                        FAILWITH;   # FAILED
                      }
                      {
                        CAR;        # nat : nat : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                      }; # nat : nat : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    MUL;        # nat : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    UPDATE 3;   # pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    SWAP;       # big_map address (pair (address %gauge) (address %bribe)) : pair (nat %base) (pair (nat %genesis) (nat %real)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    PAIR;       # pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    SWAP;       # pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    # self.data.epoch += 1 # pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    UNPAIR;     # nat : pair (big_map %epoch_end nat timestamp) (address %fee_distributor) : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    PUSH nat 1; # nat : nat : pair (big_map %epoch_end nat timestamp) (address %fee_distributor) : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    ADD;        # nat : pair (big_map %epoch_end nat timestamp) (address %fee_distributor) : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    PAIR;       # pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    SWAP;       # pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    PAIR;       # pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    PAIR;       # pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    # self.data.epoch_end[self.data.epoch] = sp.add_seconds(sp.timestamp(0), sp.to_int(((sp.as_nat(sp.now - sp.timestamp(0)) + 604800) // 604800) * 604800)) # pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    DUP;        # pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    UNPAIR;     # pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    UNPAIR;     # pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    SWAP;       # pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    UNPAIR;     # nat : pair (big_map %epoch_end nat timestamp) (address %fee_distributor) : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    SWAP;       # pair (big_map %epoch_end nat timestamp) (address %fee_distributor) : nat : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    UNPAIR;     # big_map nat timestamp : address : nat : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    PUSH nat 604800; # nat : big_map nat timestamp : address : nat : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    DUP;        # nat : nat : big_map nat timestamp : address : nat : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    DUP;        # nat : nat : nat : big_map nat timestamp : address : nat : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    PUSH timestamp "1970-01-01T00:00:00Z"; # timestamp : nat : nat : nat : big_map nat timestamp : address : nat : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    NOW;        # @now : timestamp : nat : nat : nat : big_map nat timestamp : address : nat : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    SUB;        # int : nat : nat : nat : big_map nat timestamp : address : nat : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    ISNAT;      # option nat : nat : nat : nat : big_map nat timestamp : address : nat : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    IF_NONE
                      {
                        PUSH int 179; # int : nat : nat : nat : big_map nat timestamp : address : nat : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        FAILWITH;   # FAILED
                      }
                      {}; # @some : nat : nat : nat : big_map nat timestamp : address : nat : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    ADD;        # nat : nat : nat : big_map nat timestamp : address : nat : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    EDIV;       # option (pair nat nat) : nat : big_map nat timestamp : address : nat : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    IF_NONE
                      {
                        PUSH int 180; # int : nat : big_map nat timestamp : address : nat : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        FAILWITH;   # FAILED
                      }
                      {
                        CAR;        # nat : nat : big_map nat timestamp : address : nat : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                      }; # nat : nat : big_map nat timestamp : address : nat : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    MUL;        # nat : big_map nat timestamp : address : nat : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    INT;        # int : big_map nat timestamp : address : nat : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    PUSH timestamp "1970-01-01T00:00:00Z"; # timestamp : int : big_map nat timestamp : address : nat : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    ADD;        # timestamp : big_map nat timestamp : address : nat : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    SOME;       # option timestamp : big_map nat timestamp : address : nat : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    DIG 6;      # pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : option timestamp : big_map nat timestamp : address : nat : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    CAR;        # pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : option timestamp : big_map nat timestamp : address : nat : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    GET 3;      # nat : option timestamp : big_map nat timestamp : address : nat : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    UPDATE;     # big_map nat timestamp : address : nat : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    PAIR;       # pair (big_map nat timestamp) address : nat : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    SWAP;       # nat : pair (big_map nat timestamp) address : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    PAIR;       # pair nat (pair (big_map nat timestamp) address) : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    SWAP;       # pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair nat (pair (big_map nat timestamp) address) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    PAIR;       # pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map nat timestamp) address)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    PAIR;       # pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map nat timestamp) address))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                  }
                  {
                    # sp.verify(sp.now > self.data.epoch_end[self.data.epoch], 'PREVIOUS_EPOCH_YET_TO_END') # @storage
                    DUP;        # @storage : @storage
                    CAR;        # pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : @storage
                    GET 5;      # big_map nat timestamp : @storage
                    SWAP;       # @storage : big_map nat timestamp
                    DUP;        # @storage : @storage : big_map nat timestamp
                    DUG 2;      # @storage : big_map nat timestamp : @storage
                    CAR;        # pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : big_map nat timestamp : @storage
                    GET 3;      # nat : big_map nat timestamp : @storage
                    GET;        # option timestamp : @storage
                    IF_NONE
                      {
                        PUSH int 190; # int : @storage
                        FAILWITH;   # FAILED
                      }
                      {}; # @some : @storage
                    NOW;        # @now : @some : @storage
                    COMPARE;    # int : @storage
                    GT;         # bool : @storage
                    IF
                      {}
                      {
                        PUSH string "PREVIOUS_EPOCH_YET_TO_END"; # string : @storage
                        FAILWITH;   # FAILED
                      }; # @storage
                    # self.data.emission.real = sp.as_nat(self.data.emission.base - ((self.data.emission.base * sp.view("get_locked_supply", self.data.ve_address, sp.unit, sp.TNat).open_some(message = 'INVALID_VIEW')) // sp.view("get_total_supply", self.data.ply_address, sp.unit, sp.TNat).open_some(message = 'INVALID_VIEW'))) # @storage
                    DUP;        # @storage : @storage
                    UNPAIR;     # pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : @storage
                    UNPAIR;     # pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real))) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : @storage
                    UNPAIR;     # big_map address (pair (address %gauge) (address %bribe)) : pair (nat %base) (pair (nat %genesis) (nat %real)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : @storage
                    SWAP;       # pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : @storage
                    DUP 5;      # @storage : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : @storage
                    GET 3;      # pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : @storage
                    CAR;        # address : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : @storage
                    UNIT;       # unit : address : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : @storage
                    VIEW "get_total_supply" nat; # option nat : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : @storage
                    IF_NONE
                      {
                        PUSH string "INVALID_VIEW"; # string : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : @storage
                        FAILWITH;   # FAILED
                      }
                      {}; # @some : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : @storage
                    DUP 6;      # @storage : @some : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : @storage
                    GET 8;      # address : @some : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : @storage
                    UNIT;       # unit : address : @some : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : @storage
                    VIEW "get_locked_supply" nat; # option nat : @some : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : @storage
                    IF_NONE
                      {
                        PUSH string "INVALID_VIEW"; # string : @some : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : @storage
                        FAILWITH;   # FAILED
                      }
                      {}; # @some : @some : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : @storage
                    DUP 7;      # @storage : @some : @some : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : @storage
                    CAR;        # pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : @some : @some : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : @storage
                    CAR;        # pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real))) : @some : @some : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : @storage
                    GET 3;      # nat : @some : @some : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : @storage
                    MUL;        # nat : @some : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : @storage
                    EDIV;       # option (pair nat nat) : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : @storage
                    IF_NONE
                      {
                        PUSH int 212; # int : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : @storage
                        FAILWITH;   # FAILED
                      }
                      {
                        CAR;        # nat : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : @storage
                      }; # nat : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : @storage
                    DIG 5;      # @storage : nat : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    CAR;        # pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : nat : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    CAR;        # pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real))) : nat : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    GET 3;      # nat : nat : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    SUB;        # int : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    ISNAT;      # option nat : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    IF_NONE
                      {
                        PUSH int 215; # int : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                        FAILWITH;   # FAILED
                      }
                      {}; # @some : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    UPDATE 4;   # pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    SWAP;       # big_map address (pair (address %gauge) (address %bribe)) : pair (nat %base) (pair (nat %genesis) (nat %real)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    PAIR;       # pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    PAIR;       # pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    PAIR;       # pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    # if (((sp.as_nat(sp.now - sp.timestamp(0)) // 604800) * 604800) - self.data.emission.genesis) == 2419200: # pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    DUP;        # pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    CAR;        # pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    CAR;        # pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    GET 5;      # nat : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    PUSH int 2419200; # int : nat : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    SWAP;       # nat : int : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    PUSH nat 604800; # nat : nat : int : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    DUP;        # nat : nat : nat : int : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    PUSH timestamp "1970-01-01T00:00:00Z"; # timestamp : nat : nat : nat : int : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    NOW;        # @now : timestamp : nat : nat : nat : int : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    SUB;        # int : nat : nat : nat : int : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    ISNAT;      # option nat : nat : nat : nat : int : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    IF_NONE
                      {
                        PUSH int 192; # int : nat : nat : nat : int : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        FAILWITH;   # FAILED
                      }
                      {}; # @some : nat : nat : nat : int : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    EDIV;       # option (pair nat nat) : nat : nat : int : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    IF_NONE
                      {
                        PUSH int 193; # int : nat : nat : int : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        FAILWITH;   # FAILED
                      }
                      {
                        CAR;        # nat : nat : nat : int : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                      }; # nat : nat : nat : int : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    MUL;        # nat : nat : int : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    SUB;        # int : int : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    COMPARE;    # int : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    EQ;         # bool : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    IF
                      {
                        # self.data.emission.base = (self.data.emission.base * 35000000) // 100000000 # pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        DUP;        # pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        UNPAIR;     # pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        UNPAIR;     # pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        UNPAIR;     # big_map address (pair (address %gauge) (address %bribe)) : pair (nat %base) (pair (nat %genesis) (nat %real)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        SWAP;       # pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        PUSH nat 100000000; # nat : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        PUSH nat 35000000; # nat : nat : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        DIG 6;      # pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : nat : nat : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                        CAR;        # pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : nat : nat : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                        CAR;        # pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : nat : nat : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                        GET 3;      # nat : nat : nat : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                        MUL;        # nat : nat : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                        EDIV;       # option (pair nat nat) : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                        IF_NONE
                          {
                            PUSH int 220; # int : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                            FAILWITH;   # FAILED
                          }
                          {
                            CAR;        # nat : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                          }; # nat : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                        UPDATE 1;   # pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                        SWAP;       # big_map address (pair (address %gauge) (address %bribe)) : pair (nat %base) (pair (nat %genesis) (nat %real)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                        PAIR;       # pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                        PAIR;       # pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                        PAIR;       # pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                      }
                      {}; # pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    # if ((((sp.as_nat(sp.now - sp.timestamp(0)) // 604800) * 604800) - self.data.emission.genesis) % 31449600) == 0: # pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    PUSH nat 0; # nat : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    PUSH int 31449600; # int : nat : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    DUP 3;      # pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : int : nat : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    CAR;        # pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : int : nat : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    CAR;        # pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : int : nat : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    GET 5;      # nat : int : nat : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    PUSH nat 604800; # nat : nat : int : nat : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    DUP;        # nat : nat : nat : int : nat : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    PUSH timestamp "1970-01-01T00:00:00Z"; # timestamp : nat : nat : nat : int : nat : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    NOW;        # @now : timestamp : nat : nat : nat : int : nat : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    SUB;        # int : nat : nat : nat : int : nat : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    ISNAT;      # option nat : nat : nat : nat : int : nat : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    IF_NONE
                      {
                        PUSH int 192; # int : nat : nat : nat : int : nat : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        FAILWITH;   # FAILED
                      }
                      {}; # @some : nat : nat : nat : int : nat : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    EDIV;       # option (pair nat nat) : nat : nat : int : nat : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    IF_NONE
                      {
                        PUSH int 193; # int : nat : nat : int : nat : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        FAILWITH;   # FAILED
                      }
                      {
                        CAR;        # nat : nat : nat : int : nat : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                      }; # nat : nat : nat : int : nat : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    MUL;        # nat : nat : int : nat : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    SUB;        # int : int : nat : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    EDIV;       # option (pair int nat) : nat : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    IF_NONE
                      {
                        PUSH int 221; # int : nat : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        FAILWITH;   # FAILED
                      }
                      {
                        CDR;        # nat : nat : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                      }; # nat : nat : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    COMPARE;    # int : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    EQ;         # bool : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    IF
                      {
                        # self.data.emission.base = (self.data.emission.base * 55000000) // 100000000 # pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        DUP;        # pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        UNPAIR;     # pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        UNPAIR;     # pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        UNPAIR;     # big_map address (pair (address %gauge) (address %bribe)) : pair (nat %base) (pair (nat %genesis) (nat %real)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        SWAP;       # pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        PUSH nat 100000000; # nat : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        PUSH nat 55000000; # nat : nat : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        DIG 6;      # pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : nat : nat : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                        CAR;        # pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : nat : nat : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                        CAR;        # pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : nat : nat : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                        GET 3;      # nat : nat : nat : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                        MUL;        # nat : nat : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                        EDIV;       # option (pair nat nat) : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                        IF_NONE
                          {
                            PUSH int 222; # int : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                            FAILWITH;   # FAILED
                          }
                          {
                            CAR;        # nat : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                          }; # nat : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                        UPDATE 1;   # pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                        SWAP;       # big_map address (pair (address %gauge) (address %bribe)) : pair (nat %base) (pair (nat %genesis) (nat %real)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                        PAIR;       # pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                        PAIR;       # pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                        PAIR;       # pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        # if self.data.emission.base < 10000000000000000000000: # pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        DUP;        # pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        CAR;        # pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        CAR;        # pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        GET 3;      # nat : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        PUSH nat 10000000000000000000000; # nat : nat : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        COMPARE;    # int : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        GT;         # bool : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        IF
                          {
                            # self.data.emission.base = 10000000000000000000000 # pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                            UNPAIR;     # pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                            UNPAIR;     # pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                            UNPAIR;     # big_map address (pair (address %gauge) (address %bribe)) : pair (nat %base) (pair (nat %genesis) (nat %real)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                            SWAP;       # pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                            PUSH nat 10000000000000000000000; # nat : pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                            UPDATE 1;   # pair (nat %base) (pair (nat %genesis) (nat %real)) : big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                            SWAP;       # big_map address (pair (address %gauge) (address %bribe)) : pair (nat %base) (pair (nat %genesis) (nat %real)) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                            PAIR;       # pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                            PAIR;       # pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                            PAIR;       # pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                          }
                          {}; # pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                      }
                      {}; # pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    # self.data.epoch += 1 # pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    UNPAIR;     # pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    UNPAIR;     # pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    SWAP;       # pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    UNPAIR;     # nat : pair (big_map %epoch_end nat timestamp) (address %fee_distributor) : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    PUSH nat 1; # nat : nat : pair (big_map %epoch_end nat timestamp) (address %fee_distributor) : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    ADD;        # nat : pair (big_map %epoch_end nat timestamp) (address %fee_distributor) : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    PAIR;       # pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    SWAP;       # pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    PAIR;       # pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    PAIR;       # pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    # self.data.epoch_end[self.data.epoch] = sp.add_seconds(self.data.epoch_end[sp.as_nat(self.data.epoch - 1)], 604800) # pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    DUP;        # pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    UNPAIR;     # pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    UNPAIR;     # pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    SWAP;       # pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)) : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    UNPAIR;     # nat : pair (big_map %epoch_end nat timestamp) (address %fee_distributor) : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    SWAP;       # pair (big_map %epoch_end nat timestamp) (address %fee_distributor) : nat : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    UNPAIR;     # big_map nat timestamp : address : nat : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    PUSH int 604800; # int : big_map nat timestamp : address : nat : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    DUP 7;      # pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : int : big_map nat timestamp : address : nat : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    CAR;        # pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : int : big_map nat timestamp : address : nat : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    GET 5;      # big_map nat timestamp : int : big_map nat timestamp : address : nat : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    PUSH nat 1; # nat : big_map nat timestamp : int : big_map nat timestamp : address : nat : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    DUP 9;      # pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : nat : big_map nat timestamp : int : big_map nat timestamp : address : nat : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    CAR;        # pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : nat : big_map nat timestamp : int : big_map nat timestamp : address : nat : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    GET 3;      # nat : nat : big_map nat timestamp : int : big_map nat timestamp : address : nat : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    SUB;        # int : big_map nat timestamp : int : big_map nat timestamp : address : nat : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    ISNAT;      # option nat : big_map nat timestamp : int : big_map nat timestamp : address : nat : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    IF_NONE
                      {
                        PUSH int 228; # int : big_map nat timestamp : int : big_map nat timestamp : address : nat : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        FAILWITH;   # FAILED
                      }
                      {}; # @some : big_map nat timestamp : int : big_map nat timestamp : address : nat : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    GET;        # option timestamp : int : big_map nat timestamp : address : nat : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    IF_NONE
                      {
                        PUSH int 228; # int : int : big_map nat timestamp : address : nat : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        FAILWITH;   # FAILED
                      }
                      {}; # @some : int : big_map nat timestamp : address : nat : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    ADD;        # timestamp : big_map nat timestamp : address : nat : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    SOME;       # option timestamp : big_map nat timestamp : address : nat : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    DIG 6;      # pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : option timestamp : big_map nat timestamp : address : nat : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    CAR;        # pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : option timestamp : big_map nat timestamp : address : nat : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    GET 3;      # nat : option timestamp : big_map nat timestamp : address : nat : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    UPDATE;     # big_map nat timestamp : address : nat : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    PAIR;       # pair (big_map nat timestamp) address : nat : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    SWAP;       # nat : pair (big_map nat timestamp) address : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    PAIR;       # pair nat (pair (big_map nat timestamp) address) : pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    SWAP;       # pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real))) : pair nat (pair (big_map nat timestamp) address) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    PAIR;       # pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map nat timestamp) address)) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                    PAIR;       # pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map nat timestamp) address))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                  }; # pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map nat timestamp) address))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                NIL operation; # list operation : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map nat timestamp) address))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
              }; # list operation : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map nat timestamp) address))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
          }; # list operation : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map nat timestamp) address))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
      }
      {
        IF_LEFT
          {
            # == pull_amm_fee ==
            # sp.verify(self.data.epoch > params.epoch, 'INVALID_EPOCH') # @parameter%pull_amm_fee : @storage
            DUP;        # @parameter%pull_amm_fee : @parameter%pull_amm_fee : @storage
            CDR;        # nat : @parameter%pull_amm_fee : @storage
            DUP 3;      # @storage : nat : @parameter%pull_amm_fee : @storage
            CAR;        # pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : nat : @parameter%pull_amm_fee : @storage
            GET 3;      # nat : nat : @parameter%pull_amm_fee : @storage
            COMPARE;    # int : @parameter%pull_amm_fee : @storage
            GT;         # bool : @parameter%pull_amm_fee : @storage
            IF
              {}
              {
                PUSH string "INVALID_EPOCH"; # string : @parameter%pull_amm_fee : @storage
                FAILWITH;   # FAILED
              }; # @parameter%pull_amm_fee : @storage
            SWAP;       # @storage : @parameter%pull_amm_fee
            # sp.verify(self.data.amm_to_gauge_bribe.contains(params.amm), 'AMM_INVALID_OR_NOT_WHITELISTED') # @storage : @parameter%pull_amm_fee
            DUP;        # @storage : @storage : @parameter%pull_amm_fee
            DUG 2;      # @storage : @parameter%pull_amm_fee : @storage
            CAR;        # pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : @parameter%pull_amm_fee : @storage
            CAR;        # pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real))) : @parameter%pull_amm_fee : @storage
            CAR;        # big_map address (pair (address %gauge) (address %bribe)) : @parameter%pull_amm_fee : @storage
            SWAP;       # @parameter%pull_amm_fee : big_map address (pair (address %gauge) (address %bribe)) : @storage
            CAR;        # address : big_map address (pair (address %gauge) (address %bribe)) : @storage
            MEM;        # bool : @storage
            IF
              {}
              {
                PUSH string "AMM_INVALID_OR_NOT_WHITELISTED"; # string : @storage
                FAILWITH;   # FAILED
              }; # @storage
            NIL operation; # list operation : @storage
          }
          {
            IF_LEFT
              {
                # == recharge_gauge ==
                # sp.verify(self.data.epoch > params.epoch, 'INVALID_EPOCH') # @parameter%recharge_gauge : @storage
                DUP;        # @parameter%recharge_gauge : @parameter%recharge_gauge : @storage
                CDR;        # nat : @parameter%recharge_gauge : @storage
                DUP 3;      # @storage : nat : @parameter%recharge_gauge : @storage
                CAR;        # pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : nat : @parameter%recharge_gauge : @storage
                GET 3;      # nat : nat : @parameter%recharge_gauge : @storage
                COMPARE;    # int : @parameter%recharge_gauge : @storage
                GT;         # bool : @parameter%recharge_gauge : @storage
                IF
                  {}
                  {
                    PUSH string "INVALID_EPOCH"; # string : @parameter%recharge_gauge : @storage
                    FAILWITH;   # FAILED
                  }; # @parameter%recharge_gauge : @storage
                SWAP;       # @storage : @parameter%recharge_gauge
                # sp.verify(self.data.amm_to_gauge_bribe.contains(params.amm), 'AMM_INVALID_OR_NOT_WHITELISTED') # @storage : @parameter%recharge_gauge
                DUP;        # @storage : @storage : @parameter%recharge_gauge
                DUG 2;      # @storage : @parameter%recharge_gauge : @storage
                CAR;        # pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : @parameter%recharge_gauge : @storage
                CAR;        # pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real))) : @parameter%recharge_gauge : @storage
                CAR;        # big_map address (pair (address %gauge) (address %bribe)) : @parameter%recharge_gauge : @storage
                SWAP;       # @parameter%recharge_gauge : big_map address (pair (address %gauge) (address %bribe)) : @storage
                DUP;        # @parameter%recharge_gauge : @parameter%recharge_gauge : big_map address (pair (address %gauge) (address %bribe)) : @storage
                DUG 2;      # @parameter%recharge_gauge : big_map address (pair (address %gauge) (address %bribe)) : @parameter%recharge_gauge : @storage
                CAR;        # address : big_map address (pair (address %gauge) (address %bribe)) : @parameter%recharge_gauge : @storage
                MEM;        # bool : @parameter%recharge_gauge : @storage
                IF
                  {}
                  {
                    PUSH string "AMM_INVALID_OR_NOT_WHITELISTED"; # string : @parameter%recharge_gauge : @storage
                    FAILWITH;   # FAILED
                  }; # @parameter%recharge_gauge : @storage
                # sp.transfer(sp.record(address = self.data.amm_to_gauge_bribe[params.amm].gauge, value = (self.data.emission.real * ((self.data.total_amm_votes[sp.record(amm = params.amm, epoch = params.epoch)] * 1000000000000000000) // self.data.total_epoch_votes[params.epoch])) // 1000000000000000000), sp.tez(0), sp.contract(sp.TRecord(address = sp.TAddress, value = sp.TNat).layout(("address", "value")), self.data.ply_address, entry_point='mint').open_some()) # @parameter%recharge_gauge : @storage
                NIL operation; # list operation : @parameter%recharge_gauge : @storage
                DUP 3;      # @storage : list operation : @parameter%recharge_gauge : @storage
                GET 3;      # pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) : list operation : @parameter%recharge_gauge : @storage
                CAR;        # address : list operation : @parameter%recharge_gauge : @storage
                CONTRACT %mint (pair (address %address) (nat %value)); # option (contract (pair (address %address) (nat %value))) : list operation : @parameter%recharge_gauge : @storage
                IF_NONE
                  {
                    PUSH int 425; # int : list operation : @parameter%recharge_gauge : @storage
                    FAILWITH;   # FAILED
                  }
                  {}; # @some : list operation : @parameter%recharge_gauge : @storage
                PUSH mutez 0; # mutez : @some : list operation : @parameter%recharge_gauge : @storage
                PUSH nat 1000000000000000000; # nat : mutez : @some : list operation : @parameter%recharge_gauge : @storage
                DUP 6;      # @storage : nat : mutez : @some : list operation : @parameter%recharge_gauge : @storage
                GET 5;      # big_map nat nat : nat : mutez : @some : list operation : @parameter%recharge_gauge : @storage
                DUP 6;      # @parameter%recharge_gauge : big_map nat nat : nat : mutez : @some : list operation : @parameter%recharge_gauge : @storage
                CDR;        # nat : big_map nat nat : nat : mutez : @some : list operation : @parameter%recharge_gauge : @storage
                GET;        # option nat : nat : mutez : @some : list operation : @parameter%recharge_gauge : @storage
                IF_NONE
                  {
                    PUSH int 418; # int : nat : mutez : @some : list operation : @parameter%recharge_gauge : @storage
                    FAILWITH;   # FAILED
                  }
                  {}; # @some : nat : mutez : @some : list operation : @parameter%recharge_gauge : @storage
                PUSH nat 1000000000000000000; # nat : @some : nat : mutez : @some : list operation : @parameter%recharge_gauge : @storage
                DUP 8;      # @storage : nat : @some : nat : mutez : @some : list operation : @parameter%recharge_gauge : @storage
                GET 3;      # pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) : nat : @some : nat : mutez : @some : list operation : @parameter%recharge_gauge : @storage
                GET 4;      # big_map (pair (address %amm) (nat %epoch)) nat : nat : @some : nat : mutez : @some : list operation : @parameter%recharge_gauge : @storage
                DIG 7;      # @parameter%recharge_gauge : big_map (pair (address %amm) (nat %epoch)) nat : nat : @some : nat : mutez : @some : list operation : @storage
                DUP;        # @parameter%recharge_gauge : @parameter%recharge_gauge : big_map (pair (address %amm) (nat %epoch)) nat : nat : @some : nat : mutez : @some : list operation : @storage
                CDR;        # nat : @parameter%recharge_gauge : big_map (pair (address %amm) (nat %epoch)) nat : nat : @some : nat : mutez : @some : list operation : @storage
                SWAP;       # @parameter%recharge_gauge : nat : big_map (pair (address %amm) (nat %epoch)) nat : nat : @some : nat : mutez : @some : list operation : @storage
                DUP;        # @parameter%recharge_gauge : @parameter%recharge_gauge : nat : big_map (pair (address %amm) (nat %epoch)) nat : nat : @some : nat : mutez : @some : list operation : @storage
                DUG 9;      # @parameter%recharge_gauge : nat : big_map (pair (address %amm) (nat %epoch)) nat : nat : @some : nat : mutez : @some : list operation : @parameter%recharge_gauge : @storage
                CAR;        # address : nat : big_map (pair (address %amm) (nat %epoch)) nat : nat : @some : nat : mutez : @some : list operation : @parameter%recharge_gauge : @storage
                PAIR;       # pair address nat : big_map (pair (address %amm) (nat %epoch)) nat : nat : @some : nat : mutez : @some : list operation : @parameter%recharge_gauge : @storage
                GET;        # option nat : nat : @some : nat : mutez : @some : list operation : @parameter%recharge_gauge : @storage
                IF_NONE
                  {
                    PUSH int 417; # int : nat : @some : nat : mutez : @some : list operation : @parameter%recharge_gauge : @storage
                    FAILWITH;   # FAILED
                  }
                  {}; # @some : nat : @some : nat : mutez : @some : list operation : @parameter%recharge_gauge : @storage
                MUL;        # nat : @some : nat : mutez : @some : list operation : @parameter%recharge_gauge : @storage
                EDIV;       # option (pair nat nat) : nat : mutez : @some : list operation : @parameter%recharge_gauge : @storage
                IF_NONE
                  {
                    PUSH int 419; # int : nat : mutez : @some : list operation : @parameter%recharge_gauge : @storage
                    FAILWITH;   # FAILED
                  }
                  {
                    CAR;        # nat : nat : mutez : @some : list operation : @parameter%recharge_gauge : @storage
                  }; # nat : nat : mutez : @some : list operation : @parameter%recharge_gauge : @storage
                DUP 7;      # @storage : nat : nat : mutez : @some : list operation : @parameter%recharge_gauge : @storage
                CAR;        # pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : nat : nat : mutez : @some : list operation : @parameter%recharge_gauge : @storage
                CAR;        # pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real))) : nat : nat : mutez : @some : list operation : @parameter%recharge_gauge : @storage
                GET 6;      # nat : nat : nat : mutez : @some : list operation : @parameter%recharge_gauge : @storage
                MUL;        # nat : nat : mutez : @some : list operation : @parameter%recharge_gauge : @storage
                EDIV;       # option (pair nat nat) : mutez : @some : list operation : @parameter%recharge_gauge : @storage
                IF_NONE
                  {
                    PUSH int 422; # int : mutez : @some : list operation : @parameter%recharge_gauge : @storage
                    FAILWITH;   # FAILED
                  }
                  {
                    CAR;        # nat : mutez : @some : list operation : @parameter%recharge_gauge : @storage
                  }; # nat : mutez : @some : list operation : @parameter%recharge_gauge : @storage
                DUP 6;      # @storage : nat : mutez : @some : list operation : @parameter%recharge_gauge : @storage
                CAR;        # pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : nat : mutez : @some : list operation : @parameter%recharge_gauge : @storage
                CAR;        # pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real))) : nat : mutez : @some : list operation : @parameter%recharge_gauge : @storage
                CAR;        # big_map address (pair (address %gauge) (address %bribe)) : nat : mutez : @some : list operation : @parameter%recharge_gauge : @storage
                DIG 5;      # @parameter%recharge_gauge : big_map address (pair (address %gauge) (address %bribe)) : nat : mutez : @some : list operation : @storage
                CAR;        # address : big_map address (pair (address %gauge) (address %bribe)) : nat : mutez : @some : list operation : @storage
                GET;        # option (pair (address %gauge) (address %bribe)) : nat : mutez : @some : list operation : @storage
                IF_NONE
                  {
                    PUSH int 431; # int : nat : mutez : @some : list operation : @storage
                    FAILWITH;   # FAILED
                  }
                  {}; # @some : nat : mutez : @some : list operation : @storage
                CAR;        # address : nat : mutez : @some : list operation : @storage
                PAIR;       # pair address nat : mutez : @some : list operation : @storage
                TRANSFER_TOKENS; # operation : list operation : @storage
                CONS;       # list operation : @storage
              }
              {
                SWAP;       # @storage : @parameter%vote
                # == vote ==
                # sp.verify(sp.now < self.data.epoch_end[self.data.epoch], 'EPOCH_ENDED') # @storage : @parameter%vote
                DUP;        # @storage : @storage : @parameter%vote
                CAR;        # pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : @storage : @parameter%vote
                GET 5;      # big_map nat timestamp : @storage : @parameter%vote
                SWAP;       # @storage : big_map nat timestamp : @parameter%vote
                DUP;        # @storage : @storage : big_map nat timestamp : @parameter%vote
                DUG 3;      # @storage : big_map nat timestamp : @parameter%vote : @storage
                CAR;        # pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : big_map nat timestamp : @parameter%vote : @storage
                GET 3;      # nat : big_map nat timestamp : @parameter%vote : @storage
                GET;        # option timestamp : @parameter%vote : @storage
                IF_NONE
                  {
                    PUSH int 235; # int : @parameter%vote : @storage
                    FAILWITH;   # FAILED
                  }
                  {}; # @some : @parameter%vote : @storage
                NOW;        # @now : @some : @parameter%vote : @storage
                COMPARE;    # int : @parameter%vote : @storage
                LT;         # bool : @parameter%vote : @storage
                IF
                  {}
                  {
                    PUSH string "EPOCH_ENDED"; # string : @parameter%vote : @storage
                    FAILWITH;   # FAILED
                  }; # @parameter%vote : @storage
                SWAP;       # @storage : @parameter%vote
                # sp.verify(sp.view("is_owner", self.data.ve_address, sp.record(address = sp.sender, token_id = params.token_id), sp.TBool).open_some(message = 'INVALID_VIEW'), 'SENDER_DOES_NOT_OWN_LOCK') # @storage : @parameter%vote
                DUP;        # @storage : @storage : @parameter%vote
                DUG 2;      # @storage : @parameter%vote : @storage
                GET 8;      # address : @parameter%vote : @storage
                SWAP;       # @parameter%vote : address : @storage
                DUP;        # @parameter%vote : @parameter%vote : address : @storage
                DUG 2;      # @parameter%vote : address : @parameter%vote : @storage
                CAR;        # nat : address : @parameter%vote : @storage
                SENDER;     # @sender : nat : address : @parameter%vote : @storage
                PAIR;       # pair @sender nat : address : @parameter%vote : @storage
                VIEW "is_owner" bool; # option bool : @parameter%vote : @storage
                IF_NONE
                  {
                    PUSH string "INVALID_VIEW"; # string : @parameter%vote : @storage
                    FAILWITH;   # FAILED
                  }
                  {}; # @some : @parameter%vote : @storage
                IF
                  {}
                  {
                    PUSH string "SENDER_DOES_NOT_OWN_LOCK"; # string : @parameter%vote : @storage
                    FAILWITH;   # FAILED
                  }; # @parameter%vote : @storage
                SWAP;       # @storage : @parameter%vote
                # power_used = sp.local("power_used", sp.as_nat(sp.view("get_token_voting_power", self.data.ve_address, sp.record(token_id = params.token_id, ts = sp.as_nat(sp.now - sp.timestamp(0))), sp.TNat).open_some(message = 'INVALID_VIEW') - self.data.total_token_votes.get(sp.record(token_id = params.token_id, epoch = self.data.epoch), default_value = 0))) # @storage : @parameter%vote
                DUP;        # @storage : @storage : @parameter%vote
                GET 7;      # big_map (pair (nat %token_id) (nat %epoch)) nat : @storage : @parameter%vote
                SWAP;       # @storage : big_map (pair (nat %token_id) (nat %epoch)) nat : @parameter%vote
                DUP;        # @storage : @storage : big_map (pair (nat %token_id) (nat %epoch)) nat : @parameter%vote
                DUG 3;      # @storage : big_map (pair (nat %token_id) (nat %epoch)) nat : @parameter%vote : @storage
                CAR;        # pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : big_map (pair (nat %token_id) (nat %epoch)) nat : @parameter%vote : @storage
                GET 3;      # nat : big_map (pair (nat %token_id) (nat %epoch)) nat : @parameter%vote : @storage
                DUP 3;      # @parameter%vote : nat : big_map (pair (nat %token_id) (nat %epoch)) nat : @parameter%vote : @storage
                CAR;        # nat : nat : big_map (pair (nat %token_id) (nat %epoch)) nat : @parameter%vote : @storage
                PAIR;       # pair nat nat : big_map (pair (nat %token_id) (nat %epoch)) nat : @parameter%vote : @storage
                GET;        # option nat : @parameter%vote : @storage
                IF_NONE
                  {
                    PUSH nat 0; # nat : @parameter%vote : @storage
                  }
                  {}; # nat : @parameter%vote : @storage
                DUP 3;      # @storage : nat : @parameter%vote : @storage
                GET 8;      # address : nat : @parameter%vote : @storage
                PUSH timestamp "1970-01-01T00:00:00Z"; # timestamp : address : nat : @parameter%vote : @storage
                NOW;        # @now : timestamp : address : nat : @parameter%vote : @storage
                SUB;        # int : address : nat : @parameter%vote : @storage
                ISNAT;      # option nat : address : nat : @parameter%vote : @storage
                IF_NONE
                  {
                    PUSH int 238; # int : address : nat : @parameter%vote : @storage
                    FAILWITH;   # FAILED
                  }
                  {}; # @some : address : nat : @parameter%vote : @storage
                DUP 4;      # @parameter%vote : @some : address : nat : @parameter%vote : @storage
                CAR;        # nat : @some : address : nat : @parameter%vote : @storage
                PAIR;       # pair nat @some : address : nat : @parameter%vote : @storage
                VIEW "get_token_voting_power" nat; # option nat : nat : @parameter%vote : @storage
                IF_NONE
                  {
                    PUSH string "INVALID_VIEW"; # string : nat : @parameter%vote : @storage
                    FAILWITH;   # FAILED
                  }
                  {}; # @some : nat : @parameter%vote : @storage
                SUB;        # int : @parameter%vote : @storage
                ISNAT;      # option nat : @parameter%vote : @storage
                IF_NONE
                  {
                    PUSH int 264; # int : @parameter%vote : @storage
                    FAILWITH;   # FAILED
                  }
                  {}; # @some : @parameter%vote : @storage
                SWAP;       # @parameter%vote : @some : @storage
                # for vote_item in params.vote_items: ... # @parameter%vote : @some : @storage
                DUP;        # @parameter%vote : @parameter%vote : @some : @storage
                DUG 2;      # @parameter%vote : @some : @parameter%vote : @storage
                CDR;        # list (pair (address %amm) (nat %votes)) : @some : @parameter%vote : @storage
                ITER
                  {
                    # sp.verify(self.data.amm_to_gauge_bribe.contains(vote_item.amm), 'AMM_INVALID_OR_NOT_WHITELISTED') # pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
                    DUP 4;      # @storage : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
                    CAR;        # pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
                    CAR;        # pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
                    CAR;        # big_map address (pair (address %gauge) (address %bribe)) : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
                    SWAP;       # pair (address %amm) (nat %votes) : big_map address (pair (address %gauge) (address %bribe)) : @some : @parameter%vote : @storage
                    DUP;        # pair (address %amm) (nat %votes) : pair (address %amm) (nat %votes) : big_map address (pair (address %gauge) (address %bribe)) : @some : @parameter%vote : @storage
                    DUG 2;      # pair (address %amm) (nat %votes) : big_map address (pair (address %gauge) (address %bribe)) : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
                    CAR;        # address : big_map address (pair (address %gauge) (address %bribe)) : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
                    MEM;        # bool : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
                    IF
                      {}
                      {
                        PUSH string "AMM_INVALID_OR_NOT_WHITELISTED"; # string : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
                        FAILWITH;   # FAILED
                      }; # pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
                    # sp.verify(vote_item.votes != 0, 'ZERO_VOTE_NOT_ALLOWED') # pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
                    DUP;        # pair (address %amm) (nat %votes) : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
                    CDR;        # nat : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
                    PUSH nat 0; # nat : nat : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
                    COMPARE;    # int : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
                    NEQ;        # bool : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
                    IF
                      {}
                      {
                        PUSH string "ZERO_VOTE_NOT_ALLOWED"; # string : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
                        FAILWITH;   # FAILED
                      }; # pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
                    # if ~ (self.data.token_amm_votes.contains(sp.record(token_id = params.token_id, amm = vote_item.amm, epoch = self.data.epoch))): # pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
                    DIG 3;      # @storage : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    DUP;        # @storage : @storage : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    GET 3;      # pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) : @storage : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    GET 3;      # big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : @storage : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    SWAP;       # @storage : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    DUP;        # @storage : @storage : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    DUG 5;      # @storage : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
                    CAR;        # pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
                    GET 3;      # nat : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
                    DUP 3;      # pair (address %amm) (nat %votes) : nat : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
                    CAR;        # address : nat : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
                    DUP 6;      # @parameter%vote : address : nat : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
                    CAR;        # nat : address : nat : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
                    PAIR 3;     # pair nat (pair address nat) : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
                    MEM;        # bool : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
                    IF
                      {}
                      {
                        # self.data.token_amm_votes[sp.record(token_id = params.token_id, amm = vote_item.amm, epoch = self.data.epoch)] = 0 # pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
                        DUP 4;      # @storage : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
                        UNPAIR;     # pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
                        SWAP;       # pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
                        UNPAIR;     # pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
                        UNPAIR;     # address : pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat) : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
                        SWAP;       # pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat) : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
                        UNPAIR;     # big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : big_map (pair (address %amm) (nat %epoch)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
                        PUSH (option nat) (Some 0); # option nat : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : big_map (pair (address %amm) (nat %epoch)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
                        DIG 9;      # @storage : option nat : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : big_map (pair (address %amm) (nat %epoch)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                        CAR;        # pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : option nat : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : big_map (pair (address %amm) (nat %epoch)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                        GET 3;      # nat : option nat : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : big_map (pair (address %amm) (nat %epoch)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                        DUP 8;      # pair (address %amm) (nat %votes) : nat : option nat : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : big_map (pair (address %amm) (nat %epoch)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                        CAR;        # address : nat : option nat : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : big_map (pair (address %amm) (nat %epoch)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                        DUP 11;     # @parameter%vote : address : nat : option nat : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : big_map (pair (address %amm) (nat %epoch)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                        CAR;        # nat : address : nat : option nat : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : big_map (pair (address %amm) (nat %epoch)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                        PAIR 3;     # pair nat (pair address nat) : option nat : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : big_map (pair (address %amm) (nat %epoch)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                        UPDATE;     # big_map (pair nat (pair address nat)) nat : big_map (pair (address %amm) (nat %epoch)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                        PAIR;       # pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat) : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                        SWAP;       # address : pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat) : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                        PAIR;       # pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat)) : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                        PAIR;       # pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                        SWAP;       # pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                        PAIR;       # pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                        DUG 3;      # pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                      }; # pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    # self.data.token_amm_votes[sp.record(token_id = params.token_id, amm = vote_item.amm, epoch = self.data.epoch)] += vote_item.votes # pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    DUP 4;      # pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    UNPAIR;     # pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    SWAP;       # pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    UNPAIR;     # pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat)) : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    UNPAIR;     # address : pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat) : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    SWAP;       # pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat) : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    UNPAIR;     # big_map (pair nat (pair address nat)) nat : big_map (pair (address %amm) (nat %epoch)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    DUP;        # big_map (pair nat (pair address nat)) nat : big_map (pair nat (pair address nat)) nat : big_map (pair (address %amm) (nat %epoch)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    DIG 9;      # pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : big_map (pair nat (pair address nat)) nat : big_map (pair nat (pair address nat)) nat : big_map (pair (address %amm) (nat %epoch)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    CAR;        # pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : big_map (pair nat (pair address nat)) nat : big_map (pair nat (pair address nat)) nat : big_map (pair (address %amm) (nat %epoch)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    GET 3;      # nat : big_map (pair nat (pair address nat)) nat : big_map (pair nat (pair address nat)) nat : big_map (pair (address %amm) (nat %epoch)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    DUP 8;      # pair (address %amm) (nat %votes) : nat : big_map (pair nat (pair address nat)) nat : big_map (pair nat (pair address nat)) nat : big_map (pair (address %amm) (nat %epoch)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    CAR;        # address : nat : big_map (pair nat (pair address nat)) nat : big_map (pair nat (pair address nat)) nat : big_map (pair (address %amm) (nat %epoch)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    DUP 11;     # @parameter%vote : address : nat : big_map (pair nat (pair address nat)) nat : big_map (pair nat (pair address nat)) nat : big_map (pair (address %amm) (nat %epoch)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    CAR;        # nat : address : nat : big_map (pair nat (pair address nat)) nat : big_map (pair nat (pair address nat)) nat : big_map (pair (address %amm) (nat %epoch)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    PAIR 3;     # pair nat (pair address nat) : big_map (pair nat (pair address nat)) nat : big_map (pair nat (pair address nat)) nat : big_map (pair (address %amm) (nat %epoch)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    DUP;        # pair nat (pair address nat) : pair nat (pair address nat) : big_map (pair nat (pair address nat)) nat : big_map (pair nat (pair address nat)) nat : big_map (pair (address %amm) (nat %epoch)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    DUG 2;      # pair nat (pair address nat) : big_map (pair nat (pair address nat)) nat : pair nat (pair address nat) : big_map (pair nat (pair address nat)) nat : big_map (pair (address %amm) (nat %epoch)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    GET;        # option nat : pair nat (pair address nat) : big_map (pair nat (pair address nat)) nat : big_map (pair (address %amm) (nat %epoch)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    IF_NONE
                      {
                        PUSH int 278; # int : pair nat (pair address nat) : big_map (pair nat (pair address nat)) nat : big_map (pair (address %amm) (nat %epoch)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                        FAILWITH;   # FAILED
                      }
                      {}; # @some : pair nat (pair address nat) : big_map (pair nat (pair address nat)) nat : big_map (pair (address %amm) (nat %epoch)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    DUP 8;      # pair (address %amm) (nat %votes) : @some : pair nat (pair address nat) : big_map (pair nat (pair address nat)) nat : big_map (pair (address %amm) (nat %epoch)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    CDR;        # nat : @some : pair nat (pair address nat) : big_map (pair nat (pair address nat)) nat : big_map (pair (address %amm) (nat %epoch)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    ADD;        # nat : pair nat (pair address nat) : big_map (pair nat (pair address nat)) nat : big_map (pair (address %amm) (nat %epoch)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    SOME;       # option nat : pair nat (pair address nat) : big_map (pair nat (pair address nat)) nat : big_map (pair (address %amm) (nat %epoch)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    SWAP;       # pair nat (pair address nat) : option nat : big_map (pair nat (pair address nat)) nat : big_map (pair (address %amm) (nat %epoch)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    UPDATE;     # big_map (pair nat (pair address nat)) nat : big_map (pair (address %amm) (nat %epoch)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    PAIR;       # pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat) : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    SWAP;       # address : pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat) : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    PAIR;       # pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat)) : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    PAIR;       # pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    SWAP;       # pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    PAIR;       # pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    # if ~ (self.data.total_amm_votes.contains(sp.record(amm = vote_item.amm, epoch = self.data.epoch))): # pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    DUP;        # pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    GET 3;      # pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat)) : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    GET 4;      # big_map (pair (address %amm) (nat %epoch)) nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    SWAP;       # pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : big_map (pair (address %amm) (nat %epoch)) nat : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    DUP;        # pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : big_map (pair (address %amm) (nat %epoch)) nat : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    DUG 5;      # pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : big_map (pair (address %amm) (nat %epoch)) nat : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    CAR;        # pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : big_map (pair (address %amm) (nat %epoch)) nat : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    GET 3;      # nat : big_map (pair (address %amm) (nat %epoch)) nat : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    DUP 3;      # pair (address %amm) (nat %votes) : nat : big_map (pair (address %amm) (nat %epoch)) nat : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    CAR;        # address : nat : big_map (pair (address %amm) (nat %epoch)) nat : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    PAIR;       # pair address nat : big_map (pair (address %amm) (nat %epoch)) nat : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    MEM;        # bool : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    IF
                      {}
                      {
                        # self.data.total_amm_votes[sp.record(amm = vote_item.amm, epoch = self.data.epoch)] = 0 # pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        DUP 4;      # pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        UNPAIR;     # pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        SWAP;       # pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        UNPAIR;     # pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat)) : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        UNPAIR;     # address : pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat) : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        SWAP;       # pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat) : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        UNPAIR;     # big_map (pair nat (pair address nat)) nat : big_map (pair (address %amm) (nat %epoch)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        SWAP;       # big_map (pair (address %amm) (nat %epoch)) nat : big_map (pair nat (pair address nat)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        PUSH (option nat) (Some 0); # option nat : big_map (pair (address %amm) (nat %epoch)) nat : big_map (pair nat (pair address nat)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        DIG 9;      # pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : option nat : big_map (pair (address %amm) (nat %epoch)) nat : big_map (pair nat (pair address nat)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                        CAR;        # pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : option nat : big_map (pair (address %amm) (nat %epoch)) nat : big_map (pair nat (pair address nat)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                        GET 3;      # nat : option nat : big_map (pair (address %amm) (nat %epoch)) nat : big_map (pair nat (pair address nat)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                        DUP 8;      # pair (address %amm) (nat %votes) : nat : option nat : big_map (pair (address %amm) (nat %epoch)) nat : big_map (pair nat (pair address nat)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                        CAR;        # address : nat : option nat : big_map (pair (address %amm) (nat %epoch)) nat : big_map (pair nat (pair address nat)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                        PAIR;       # pair address nat : option nat : big_map (pair (address %amm) (nat %epoch)) nat : big_map (pair nat (pair address nat)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                        UPDATE;     # big_map (pair address nat) nat : big_map (pair nat (pair address nat)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                        SWAP;       # big_map (pair nat (pair address nat)) nat : big_map (pair address nat) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                        PAIR;       # pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat) : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                        SWAP;       # address : pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat) : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                        PAIR;       # pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                        PAIR;       # pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                        SWAP;       # pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                        PAIR;       # pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                        DUG 3;      # pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                      }; # pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    # self.data.total_amm_votes[sp.record(amm = vote_item.amm, epoch = self.data.epoch)] += vote_item.votes # pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    DUP 4;      # pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    UNPAIR;     # pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    SWAP;       # pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    UNPAIR;     # pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    UNPAIR;     # address : pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat) : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    SWAP;       # pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat) : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    UNPAIR;     # big_map (pair nat (pair address nat)) nat : big_map (pair address nat) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    SWAP;       # big_map (pair address nat) nat : big_map (pair nat (pair address nat)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    DUP;        # big_map (pair address nat) nat : big_map (pair address nat) nat : big_map (pair nat (pair address nat)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    DIG 9;      # pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : big_map (pair address nat) nat : big_map (pair address nat) nat : big_map (pair nat (pair address nat)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    CAR;        # pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : big_map (pair address nat) nat : big_map (pair address nat) nat : big_map (pair nat (pair address nat)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    GET 3;      # nat : big_map (pair address nat) nat : big_map (pair address nat) nat : big_map (pair nat (pair address nat)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    DUP 8;      # pair (address %amm) (nat %votes) : nat : big_map (pair address nat) nat : big_map (pair address nat) nat : big_map (pair nat (pair address nat)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    CAR;        # address : nat : big_map (pair address nat) nat : big_map (pair address nat) nat : big_map (pair nat (pair address nat)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    PAIR;       # pair address nat : big_map (pair address nat) nat : big_map (pair address nat) nat : big_map (pair nat (pair address nat)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    DUP;        # pair address nat : pair address nat : big_map (pair address nat) nat : big_map (pair address nat) nat : big_map (pair nat (pair address nat)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    DUG 2;      # pair address nat : big_map (pair address nat) nat : pair address nat : big_map (pair address nat) nat : big_map (pair nat (pair address nat)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    GET;        # option nat : pair address nat : big_map (pair address nat) nat : big_map (pair nat (pair address nat)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    IF_NONE
                      {
                        PUSH int 284; # int : pair address nat : big_map (pair address nat) nat : big_map (pair nat (pair address nat)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                        FAILWITH;   # FAILED
                      }
                      {}; # @some : pair address nat : big_map (pair address nat) nat : big_map (pair nat (pair address nat)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    DUP 8;      # pair (address %amm) (nat %votes) : @some : pair address nat : big_map (pair address nat) nat : big_map (pair nat (pair address nat)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    CDR;        # nat : @some : pair address nat : big_map (pair address nat) nat : big_map (pair nat (pair address nat)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    ADD;        # nat : pair address nat : big_map (pair address nat) nat : big_map (pair nat (pair address nat)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    SOME;       # option nat : pair address nat : big_map (pair address nat) nat : big_map (pair nat (pair address nat)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    SWAP;       # pair address nat : option nat : big_map (pair address nat) nat : big_map (pair nat (pair address nat)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    UPDATE;     # big_map (pair address nat) nat : big_map (pair nat (pair address nat)) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    SWAP;       # big_map (pair nat (pair address nat)) nat : big_map (pair address nat) nat : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    PAIR;       # pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat) : address : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    SWAP;       # address : pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat) : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    PAIR;       # pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) : pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    PAIR;       # pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    SWAP;       # pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    PAIR;       # pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    # if ~ (self.data.total_token_votes.contains(sp.record(token_id = params.token_id, epoch = self.data.epoch))): # pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    DUP;        # pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    GET 7;      # big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    SWAP;       # pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    DUP;        # pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    DUG 5;      # pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    CAR;        # pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    GET 3;      # nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    DUP 5;      # @parameter%vote : nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    CAR;        # nat : nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    PAIR;       # pair nat nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    MEM;        # bool : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    IF
                      {}
                      {
                        # self.data.total_token_votes[sp.record(token_id = params.token_id, epoch = self.data.epoch)] = 0 # pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        DUP 4;      # pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        DUP;        # pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        GET 7;      # big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        PUSH (option nat) (Some 0); # option nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        DIG 6;      # pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : option nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                        CAR;        # pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : option nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                        GET 3;      # nat : option nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                        DUP 7;      # @parameter%vote : nat : option nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                        CAR;        # nat : nat : option nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                        PAIR;       # pair nat nat : option nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                        UPDATE;     # big_map (pair nat nat) nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                        UPDATE 7;   # pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                        DUG 3;      # pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                      }; # pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    # self.data.total_token_votes[sp.record(token_id = params.token_id, epoch = self.data.epoch)] += vote_item.votes # pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    DUP 4;      # pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    DUP;        # pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    GET 7;      # big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    DUP;        # big_map (pair (nat %token_id) (nat %epoch)) nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    DIG 6;      # pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : big_map (pair (nat %token_id) (nat %epoch)) nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    CAR;        # pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : big_map (pair (nat %token_id) (nat %epoch)) nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    GET 3;      # nat : big_map (pair (nat %token_id) (nat %epoch)) nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    DUP 7;      # @parameter%vote : nat : big_map (pair (nat %token_id) (nat %epoch)) nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    CAR;        # nat : nat : big_map (pair (nat %token_id) (nat %epoch)) nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    PAIR;       # pair nat nat : big_map (pair (nat %token_id) (nat %epoch)) nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    DUP;        # pair nat nat : pair nat nat : big_map (pair (nat %token_id) (nat %epoch)) nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    DUG 2;      # pair nat nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair nat nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    GET;        # option nat : pair nat nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    IF_NONE
                      {
                        PUSH int 290; # int : pair nat nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                        FAILWITH;   # FAILED
                      }
                      {}; # @some : pair nat nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    DUP 5;      # pair (address %amm) (nat %votes) : @some : pair nat nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    CDR;        # nat : @some : pair nat nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    ADD;        # nat : pair nat nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    SOME;       # option nat : pair nat nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    SWAP;       # pair nat nat : option nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    UPDATE;     # big_map (pair nat nat) nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    UPDATE 7;   # pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    # if ~ (self.data.total_epoch_votes.contains(self.data.epoch)): # pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    DUP;        # pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    GET 5;      # big_map nat nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    SWAP;       # pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : big_map nat nat : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    DUP;        # pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : big_map nat nat : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    DUG 5;      # pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : big_map nat nat : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    CAR;        # pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : big_map nat nat : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    GET 3;      # nat : big_map nat nat : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    MEM;        # bool : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    IF
                      {}
                      {
                        # self.data.total_epoch_votes[self.data.epoch] = 0 # pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        DUP 4;      # pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        DUP;        # pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        GET 5;      # big_map nat nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        PUSH (option nat) (Some 0); # option nat : big_map nat nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        DIG 6;      # pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : option nat : big_map nat nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                        CAR;        # pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : option nat : big_map nat nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                        GET 3;      # nat : option nat : big_map nat nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                        UPDATE;     # big_map nat nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                        UPDATE 5;   # pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                        DUG 3;      # pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                      }; # pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    # self.data.total_epoch_votes[self.data.epoch] += vote_item.votes # pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    DUP 4;      # pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    DUP;        # pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    GET 5;      # big_map nat nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    DUP;        # big_map nat nat : big_map nat nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    DIG 6;      # pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : big_map nat nat : big_map nat nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    CAR;        # pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : big_map nat nat : big_map nat nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    GET 3;      # nat : big_map nat nat : big_map nat nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    DUP;        # nat : nat : big_map nat nat : big_map nat nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    DUG 2;      # nat : big_map nat nat : nat : big_map nat nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    GET;        # option nat : nat : big_map nat nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    IF_NONE
                      {
                        PUSH int 295; # int : nat : big_map nat nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                        FAILWITH;   # FAILED
                      }
                      {}; # @some : nat : big_map nat nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    DUP 5;      # pair (address %amm) (nat %votes) : @some : nat : big_map nat nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    CDR;        # nat : @some : nat : big_map nat nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    ADD;        # nat : nat : big_map nat nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    SOME;       # option nat : nat : big_map nat nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    SWAP;       # nat : option nat : big_map nat nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    UPDATE;     # big_map nat nat : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    UPDATE 5;   # pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                    DUG 3;      # pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    # power_used.value = sp.as_nat(power_used.value - vote_item.votes, message = 'NOT_ENOUGH_VOTING_POWER_AVAILABLE') # pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    CDR;        # nat : @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    SWAP;       # @some : nat : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    SUB;        # int : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    ISNAT;      # option nat : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                    IF_NONE
                      {
                        PUSH string "NOT_ENOUGH_VOTING_POWER_AVAILABLE"; # string : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                        FAILWITH;   # FAILED
                      }
                      {}; # @some : @parameter%vote : pair (pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor)))) (pair (pair address (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
                  }; # @some : @parameter%vote : @storage
                DROP 2;     # @storage
                NIL operation; # list operation : @storage
              }; # list operation : @storage
          }; # list operation : @storage
      }; # list operation : pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map nat timestamp) address))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
    PAIR;       # pair (list operation) (pair (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair (nat %base) (pair (nat %genesis) (nat %real)))) (pair nat (pair (big_map nat timestamp) address))) (pair (pair (address %ply_address) (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat))) (pair (big_map %total_epoch_votes nat nat) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))))
  };
view
  "get_current_epoch" unit (pair nat timestamp)
  {
    CDR;        # @storage
    # sp.result((self.data.epoch, self.data.epoch_end[self.data.epoch])) # @storage
    DUP;        # @storage : @storage
    CAR;        # pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : @storage
    GET 5;      # big_map nat timestamp : @storage
    SWAP;       # @storage : big_map nat timestamp
    DUP;        # @storage : @storage : big_map nat timestamp
    DUG 2;      # @storage : big_map nat timestamp : @storage
    CAR;        # pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : big_map nat timestamp : @storage
    GET 3;      # nat : big_map nat timestamp : @storage
    GET;        # option timestamp : @storage
    IF_NONE
      {
        PUSH int 440; # int : @storage
        FAILWITH;   # FAILED
      }
      {}; # @some : @storage
    SWAP;       # @storage : @some
    CAR;        # pair (pair (big_map %amm_to_gauge_bribe address (pair (address %gauge) (address %bribe))) (pair %emission (nat %base) (pair (nat %genesis) (nat %real)))) (pair (nat %epoch) (pair (big_map %epoch_end nat timestamp) (address %fee_distributor))) : @some
    GET 3;      # nat : @some
    PAIR;       # pair nat @some
  };