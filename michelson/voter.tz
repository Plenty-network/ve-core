parameter (or (unit %next_epoch) (pair %vote (nat %token_id) (list %vote_items (pair (address %amm) (nat %votes)))));
storage   (pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))));
code
  {
    UNPAIR;     # @parameter : @storage
    IF_LEFT
      {
        DROP;       # @storage
        # == next_epoch ==
        # if self.data.epoch == 0: # @storage
        DUP;        # @storage : @storage
        CAR;        # pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : @storage
        GET 3;      # nat : @storage
        PUSH nat 0; # nat : nat : @storage
        COMPARE;    # int : @storage
        EQ;         # bool : @storage
        IF
          {
            # self.data.epoch += 1 # @storage
            UNPAIR;     # pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))
            UNPAIR;     # big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (big_map %epoch_end nat timestamp) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))
            SWAP;       # pair (nat %epoch) (big_map %epoch_end nat timestamp) : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))
            UNPAIR;     # nat : big_map nat timestamp : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))
            PUSH nat 1; # nat : nat : big_map nat timestamp : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))
            ADD;        # nat : big_map nat timestamp : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))
            PAIR;       # pair nat (big_map nat timestamp) : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))
            SWAP;       # big_map address (pair (address %gauge) (address %bribe)) : pair nat (big_map nat timestamp) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))
            PAIR;       # pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))
            PAIR;       # pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            # self.data.epoch_end[self.data.epoch] = sp.add_seconds(sp.timestamp(0), sp.to_int(((sp.as_nat(sp.now - sp.timestamp(0)) + 604800) // 604800) * 604800)) # pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            DUP;        # pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            UNPAIR;     # pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            UNPAIR;     # big_map address (pair (address %gauge) (address %bribe)) : pair nat (big_map nat timestamp) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            SWAP;       # pair nat (big_map nat timestamp) : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            UNPAIR;     # nat : big_map nat timestamp : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            SWAP;       # big_map nat timestamp : nat : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            PUSH nat 604800; # nat : big_map nat timestamp : nat : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            DUP;        # nat : nat : big_map nat timestamp : nat : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            DUP;        # nat : nat : nat : big_map nat timestamp : nat : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            PUSH timestamp "1970-01-01T00:00:00Z"; # timestamp : nat : nat : nat : big_map nat timestamp : nat : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            NOW;        # @now : timestamp : nat : nat : nat : big_map nat timestamp : nat : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            SUB;        # int : nat : nat : nat : big_map nat timestamp : nat : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            ISNAT;      # option nat : nat : nat : nat : big_map nat timestamp : nat : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            IF_NONE
              {
                PUSH int 123; # int : nat : nat : nat : big_map nat timestamp : nat : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                FAILWITH;   # FAILED
              }
              {}; # @some : nat : nat : nat : big_map nat timestamp : nat : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            ADD;        # nat : nat : nat : big_map nat timestamp : nat : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            EDIV;       # option (pair nat nat) : nat : big_map nat timestamp : nat : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            IF_NONE
              {
                PUSH int 124; # int : nat : big_map nat timestamp : nat : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                FAILWITH;   # FAILED
              }
              {
                CAR;        # nat : nat : big_map nat timestamp : nat : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
              }; # nat : nat : big_map nat timestamp : nat : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            MUL;        # nat : big_map nat timestamp : nat : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            INT;        # int : big_map nat timestamp : nat : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            PUSH timestamp "1970-01-01T00:00:00Z"; # timestamp : int : big_map nat timestamp : nat : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            ADD;        # timestamp : big_map nat timestamp : nat : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            SOME;       # option timestamp : big_map nat timestamp : nat : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            DIG 5;      # pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : option timestamp : big_map nat timestamp : nat : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))
            CAR;        # pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp)) : option timestamp : big_map nat timestamp : nat : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))
            GET 3;      # nat : option timestamp : big_map nat timestamp : nat : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))
            UPDATE;     # big_map nat timestamp : nat : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))
            SWAP;       # nat : big_map nat timestamp : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))
            PAIR;       # pair nat (big_map nat timestamp) : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))
            SWAP;       # big_map address (pair (address %gauge) (address %bribe)) : pair nat (big_map nat timestamp) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))
            PAIR;       # pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))
            PAIR;       # pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
          }
          {
            # sp.verify(sp.now > self.data.epoch_end[self.data.epoch], 'PREVIOUS_EPOCH_YET_TO_END') # @storage
            DUP;        # @storage : @storage
            CAR;        # pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : @storage
            GET 4;      # big_map nat timestamp : @storage
            SWAP;       # @storage : big_map nat timestamp
            DUP;        # @storage : @storage : big_map nat timestamp
            DUG 2;      # @storage : big_map nat timestamp : @storage
            CAR;        # pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : big_map nat timestamp : @storage
            GET 3;      # nat : big_map nat timestamp : @storage
            GET;        # option timestamp : @storage
            IF_NONE
              {
                PUSH int 131; # int : @storage
                FAILWITH;   # FAILED
              }
              {}; # @some : @storage
            NOW;        # @now : @some : @storage
            COMPARE;    # int : @storage
            GT;         # bool : @storage
            IF
              {}
              {
                PUSH string "PREVIOUS_EPOCH_YET_TO_END"; # string : @storage
                FAILWITH;   # FAILED
              }; # @storage
            # self.data.epoch += 1 # @storage
            UNPAIR;     # pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))
            UNPAIR;     # big_map address (pair (address %gauge) (address %bribe)) : pair (nat %epoch) (big_map %epoch_end nat timestamp) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))
            SWAP;       # pair (nat %epoch) (big_map %epoch_end nat timestamp) : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))
            UNPAIR;     # nat : big_map nat timestamp : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))
            PUSH nat 1; # nat : nat : big_map nat timestamp : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))
            ADD;        # nat : big_map nat timestamp : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))
            PAIR;       # pair nat (big_map nat timestamp) : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))
            SWAP;       # big_map address (pair (address %gauge) (address %bribe)) : pair nat (big_map nat timestamp) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))
            PAIR;       # pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))
            PAIR;       # pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            # self.data.epoch_end[self.data.epoch] = sp.add_seconds(self.data.epoch_end[sp.as_nat(self.data.epoch - 1)], 604800) # pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            DUP;        # pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            UNPAIR;     # pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            UNPAIR;     # big_map address (pair (address %gauge) (address %bribe)) : pair nat (big_map nat timestamp) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            SWAP;       # pair nat (big_map nat timestamp) : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            UNPAIR;     # nat : big_map nat timestamp : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            SWAP;       # big_map nat timestamp : nat : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            PUSH int 604800; # int : big_map nat timestamp : nat : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            DUP 6;      # pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : int : big_map nat timestamp : nat : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            CAR;        # pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp)) : int : big_map nat timestamp : nat : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            GET 4;      # big_map nat timestamp : int : big_map nat timestamp : nat : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            PUSH nat 1; # nat : big_map nat timestamp : int : big_map nat timestamp : nat : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            DUP 8;      # pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : nat : big_map nat timestamp : int : big_map nat timestamp : nat : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            CAR;        # pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp)) : nat : big_map nat timestamp : int : big_map nat timestamp : nat : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            GET 3;      # nat : nat : big_map nat timestamp : int : big_map nat timestamp : nat : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            SUB;        # int : big_map nat timestamp : int : big_map nat timestamp : nat : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            ISNAT;      # option nat : big_map nat timestamp : int : big_map nat timestamp : nat : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            IF_NONE
              {
                PUSH int 134; # int : big_map nat timestamp : int : big_map nat timestamp : nat : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                FAILWITH;   # FAILED
              }
              {}; # @some : big_map nat timestamp : int : big_map nat timestamp : nat : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            GET;        # option timestamp : int : big_map nat timestamp : nat : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            IF_NONE
              {
                PUSH int 134; # int : int : big_map nat timestamp : nat : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                FAILWITH;   # FAILED
              }
              {}; # @some : int : big_map nat timestamp : nat : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            ADD;        # timestamp : big_map nat timestamp : nat : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            SOME;       # option timestamp : big_map nat timestamp : nat : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            DIG 5;      # pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : option timestamp : big_map nat timestamp : nat : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))
            CAR;        # pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp)) : option timestamp : big_map nat timestamp : nat : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))
            GET 3;      # nat : option timestamp : big_map nat timestamp : nat : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))
            UPDATE;     # big_map nat timestamp : nat : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))
            SWAP;       # nat : big_map nat timestamp : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))
            PAIR;       # pair nat (big_map nat timestamp) : big_map address (pair (address %gauge) (address %bribe)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))
            SWAP;       # big_map address (pair (address %gauge) (address %bribe)) : pair nat (big_map nat timestamp) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))
            PAIR;       # pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))
            PAIR;       # pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
          }; # pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
      }
      {
        SWAP;       # @storage : @parameter%vote
        # == vote ==
        # sp.verify(sp.now < self.data.epoch_end[self.data.epoch], 'EPOCH_ENDED') # @storage : @parameter%vote
        DUP;        # @storage : @storage : @parameter%vote
        CAR;        # pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : @storage : @parameter%vote
        GET 4;      # big_map nat timestamp : @storage : @parameter%vote
        SWAP;       # @storage : big_map nat timestamp : @parameter%vote
        DUP;        # @storage : @storage : big_map nat timestamp : @parameter%vote
        DUG 3;      # @storage : big_map nat timestamp : @parameter%vote : @storage
        CAR;        # pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : big_map nat timestamp : @parameter%vote : @storage
        GET 3;      # nat : big_map nat timestamp : @parameter%vote : @storage
        GET;        # option timestamp : @parameter%vote : @storage
        IF_NONE
          {
            PUSH int 141; # int : @parameter%vote : @storage
            FAILWITH;   # FAILED
          }
          {}; # @some : @parameter%vote : @storage
        NOW;        # @now : @some : @parameter%vote : @storage
        COMPARE;    # int : @parameter%vote : @storage
        LT;         # bool : @parameter%vote : @storage
        IF
          {}
          {
            PUSH string "EPOCH_ENDED"; # string : @parameter%vote : @storage
            FAILWITH;   # FAILED
          }; # @parameter%vote : @storage
        SWAP;       # @storage : @parameter%vote
        # sp.verify(sp.view("is_owner", self.data.ve_address, sp.record(address = sp.sender, token_id = params.token_id), sp.TBool).open_some(message = 'INVALID_VIEW'), 'SENDER_DOES_NOT_OWN_LOCK') # @storage : @parameter%vote
        DUP;        # @storage : @storage : @parameter%vote
        DUG 2;      # @storage : @parameter%vote : @storage
        GET 6;      # address : @parameter%vote : @storage
        SWAP;       # @parameter%vote : address : @storage
        DUP;        # @parameter%vote : @parameter%vote : address : @storage
        DUG 2;      # @parameter%vote : address : @parameter%vote : @storage
        CAR;        # nat : address : @parameter%vote : @storage
        SENDER;     # @sender : nat : address : @parameter%vote : @storage
        PAIR;       # pair @sender nat : address : @parameter%vote : @storage
        VIEW "is_owner" bool; # option bool : @parameter%vote : @storage
        IF_NONE
          {
            PUSH string "INVALID_VIEW"; # string : @parameter%vote : @storage
            FAILWITH;   # FAILED
          }
          {}; # @some : @parameter%vote : @storage
        IF
          {}
          {
            PUSH string "SENDER_DOES_NOT_OWN_LOCK"; # string : @parameter%vote : @storage
            FAILWITH;   # FAILED
          }; # @parameter%vote : @storage
        SWAP;       # @storage : @parameter%vote
        # power_used = sp.local("power_used", sp.as_nat(sp.view("get_token_voting_power", self.data.ve_address, sp.record(token_id = params.token_id, ts = sp.as_nat(sp.now - sp.timestamp(0))), sp.TNat).open_some(message = 'INVALID_VIEW') - self.data.total_token_votes.get(sp.record(token_id = params.token_id, epoch = self.data.epoch), default_value = 0))) # @storage : @parameter%vote
        DUP;        # @storage : @storage : @parameter%vote
        GET 5;      # big_map (pair (nat %token_id) (nat %epoch)) nat : @storage : @parameter%vote
        SWAP;       # @storage : big_map (pair (nat %token_id) (nat %epoch)) nat : @parameter%vote
        DUP;        # @storage : @storage : big_map (pair (nat %token_id) (nat %epoch)) nat : @parameter%vote
        DUG 3;      # @storage : big_map (pair (nat %token_id) (nat %epoch)) nat : @parameter%vote : @storage
        CAR;        # pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : big_map (pair (nat %token_id) (nat %epoch)) nat : @parameter%vote : @storage
        GET 3;      # nat : big_map (pair (nat %token_id) (nat %epoch)) nat : @parameter%vote : @storage
        DUP 3;      # @parameter%vote : nat : big_map (pair (nat %token_id) (nat %epoch)) nat : @parameter%vote : @storage
        CAR;        # nat : nat : big_map (pair (nat %token_id) (nat %epoch)) nat : @parameter%vote : @storage
        PAIR;       # pair nat nat : big_map (pair (nat %token_id) (nat %epoch)) nat : @parameter%vote : @storage
        GET;        # option nat : @parameter%vote : @storage
        IF_NONE
          {
            PUSH nat 0; # nat : @parameter%vote : @storage
          }
          {}; # nat : @parameter%vote : @storage
        DUP 3;      # @storage : nat : @parameter%vote : @storage
        GET 6;      # address : nat : @parameter%vote : @storage
        PUSH timestamp "1970-01-01T00:00:00Z"; # timestamp : address : nat : @parameter%vote : @storage
        NOW;        # @now : timestamp : address : nat : @parameter%vote : @storage
        SUB;        # int : address : nat : @parameter%vote : @storage
        ISNAT;      # option nat : address : nat : @parameter%vote : @storage
        IF_NONE
          {
            PUSH int 144; # int : address : nat : @parameter%vote : @storage
            FAILWITH;   # FAILED
          }
          {}; # @some : address : nat : @parameter%vote : @storage
        DUP 4;      # @parameter%vote : @some : address : nat : @parameter%vote : @storage
        CAR;        # nat : @some : address : nat : @parameter%vote : @storage
        PAIR;       # pair nat @some : address : nat : @parameter%vote : @storage
        VIEW "get_token_voting_power" nat; # option nat : nat : @parameter%vote : @storage
        IF_NONE
          {
            PUSH string "INVALID_VIEW"; # string : nat : @parameter%vote : @storage
            FAILWITH;   # FAILED
          }
          {}; # @some : nat : @parameter%vote : @storage
        SUB;        # int : @parameter%vote : @storage
        ISNAT;      # option nat : @parameter%vote : @storage
        IF_NONE
          {
            PUSH int 170; # int : @parameter%vote : @storage
            FAILWITH;   # FAILED
          }
          {}; # @some : @parameter%vote : @storage
        SWAP;       # @parameter%vote : @some : @storage
        # for vote_item in params.vote_items: ... # @parameter%vote : @some : @storage
        DUP;        # @parameter%vote : @parameter%vote : @some : @storage
        DUG 2;      # @parameter%vote : @some : @parameter%vote : @storage
        CDR;        # list (pair (address %amm) (nat %votes)) : @some : @parameter%vote : @storage
        ITER
          {
            # sp.verify(self.data.distributors.contains(vote_item.amm), 'AMM_INVALID_OR_NOT_WHITELISTED') # pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
            DUP 4;      # @storage : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
            CAR;        # pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
            CAR;        # big_map address (pair (address %gauge) (address %bribe)) : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
            SWAP;       # pair (address %amm) (nat %votes) : big_map address (pair (address %gauge) (address %bribe)) : @some : @parameter%vote : @storage
            DUP;        # pair (address %amm) (nat %votes) : pair (address %amm) (nat %votes) : big_map address (pair (address %gauge) (address %bribe)) : @some : @parameter%vote : @storage
            DUG 2;      # pair (address %amm) (nat %votes) : big_map address (pair (address %gauge) (address %bribe)) : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
            CAR;        # address : big_map address (pair (address %gauge) (address %bribe)) : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
            MEM;        # bool : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
            IF
              {}
              {
                PUSH string "AMM_INVALID_OR_NOT_WHITELISTED"; # string : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
                FAILWITH;   # FAILED
              }; # pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
            # sp.verify(vote_item.votes != 0, 'ZERO_VOTE_NOT_ALLOWED') # pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
            DUP;        # pair (address %amm) (nat %votes) : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
            CDR;        # nat : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
            PUSH nat 0; # nat : nat : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
            COMPARE;    # int : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
            NEQ;        # bool : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
            IF
              {}
              {
                PUSH string "ZERO_VOTE_NOT_ALLOWED"; # string : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
                FAILWITH;   # FAILED
              }; # pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
            # if ~ (self.data.token_amm_votes.contains(sp.record(token_id = params.token_id, amm = vote_item.amm, epoch = self.data.epoch))): # pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
            DIG 3;      # @storage : pair (address %amm) (nat %votes) : @some : @parameter%vote
            DUP;        # @storage : @storage : pair (address %amm) (nat %votes) : @some : @parameter%vote
            GET 3;      # pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat) : @storage : pair (address %amm) (nat %votes) : @some : @parameter%vote
            CAR;        # big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : @storage : pair (address %amm) (nat %votes) : @some : @parameter%vote
            SWAP;       # @storage : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : pair (address %amm) (nat %votes) : @some : @parameter%vote
            DUP;        # @storage : @storage : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : pair (address %amm) (nat %votes) : @some : @parameter%vote
            DUG 5;      # @storage : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
            CAR;        # pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
            GET 3;      # nat : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
            DUP 3;      # pair (address %amm) (nat %votes) : nat : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
            CAR;        # address : nat : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
            DUP 6;      # @parameter%vote : address : nat : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
            CAR;        # nat : address : nat : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
            PAIR 3;     # pair nat (pair address nat) : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
            MEM;        # bool : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
            IF
              {}
              {
                # self.data.token_amm_votes[sp.record(token_id = params.token_id, amm = vote_item.amm, epoch = self.data.epoch)] = 0 # pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
                DUP 4;      # @storage : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
                UNPAIR;     # pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
                SWAP;       # pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
                UNPAIR;     # pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat) : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
                UNPAIR;     # big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : big_map (pair (address %amm) (nat %epoch)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
                PUSH (option nat) (Some 0); # option nat : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : big_map (pair (address %amm) (nat %epoch)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote : @storage
                DIG 8;      # @storage : option nat : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : big_map (pair (address %amm) (nat %epoch)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                CAR;        # pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : option nat : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : big_map (pair (address %amm) (nat %epoch)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                GET 3;      # nat : option nat : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : big_map (pair (address %amm) (nat %epoch)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                DUP 7;      # pair (address %amm) (nat %votes) : nat : option nat : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : big_map (pair (address %amm) (nat %epoch)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                CAR;        # address : nat : option nat : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : big_map (pair (address %amm) (nat %epoch)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                DUP 10;     # @parameter%vote : address : nat : option nat : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : big_map (pair (address %amm) (nat %epoch)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                CAR;        # nat : address : nat : option nat : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : big_map (pair (address %amm) (nat %epoch)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                PAIR 3;     # pair nat (pair address nat) : option nat : big_map (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat : big_map (pair (address %amm) (nat %epoch)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                UPDATE;     # big_map (pair nat (pair address nat)) nat : big_map (pair (address %amm) (nat %epoch)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                PAIR;       # pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat) : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                PAIR;       # pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                SWAP;       # pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                PAIR;       # pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                DUG 3;      # pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
              }; # pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            # self.data.token_amm_votes[sp.record(token_id = params.token_id, amm = vote_item.amm, epoch = self.data.epoch)] += vote_item.votes # pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            DUP 4;      # pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            UNPAIR;     # pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            SWAP;       # pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            UNPAIR;     # pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat) : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            UNPAIR;     # big_map (pair nat (pair address nat)) nat : big_map (pair (address %amm) (nat %epoch)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            DUP;        # big_map (pair nat (pair address nat)) nat : big_map (pair nat (pair address nat)) nat : big_map (pair (address %amm) (nat %epoch)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            DIG 8;      # pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : big_map (pair nat (pair address nat)) nat : big_map (pair nat (pair address nat)) nat : big_map (pair (address %amm) (nat %epoch)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            CAR;        # pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : big_map (pair nat (pair address nat)) nat : big_map (pair nat (pair address nat)) nat : big_map (pair (address %amm) (nat %epoch)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            GET 3;      # nat : big_map (pair nat (pair address nat)) nat : big_map (pair nat (pair address nat)) nat : big_map (pair (address %amm) (nat %epoch)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            DUP 7;      # pair (address %amm) (nat %votes) : nat : big_map (pair nat (pair address nat)) nat : big_map (pair nat (pair address nat)) nat : big_map (pair (address %amm) (nat %epoch)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            CAR;        # address : nat : big_map (pair nat (pair address nat)) nat : big_map (pair nat (pair address nat)) nat : big_map (pair (address %amm) (nat %epoch)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            DUP 10;     # @parameter%vote : address : nat : big_map (pair nat (pair address nat)) nat : big_map (pair nat (pair address nat)) nat : big_map (pair (address %amm) (nat %epoch)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            CAR;        # nat : address : nat : big_map (pair nat (pair address nat)) nat : big_map (pair nat (pair address nat)) nat : big_map (pair (address %amm) (nat %epoch)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            PAIR 3;     # pair nat (pair address nat) : big_map (pair nat (pair address nat)) nat : big_map (pair nat (pair address nat)) nat : big_map (pair (address %amm) (nat %epoch)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            DUP;        # pair nat (pair address nat) : pair nat (pair address nat) : big_map (pair nat (pair address nat)) nat : big_map (pair nat (pair address nat)) nat : big_map (pair (address %amm) (nat %epoch)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            DUG 2;      # pair nat (pair address nat) : big_map (pair nat (pair address nat)) nat : pair nat (pair address nat) : big_map (pair nat (pair address nat)) nat : big_map (pair (address %amm) (nat %epoch)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            GET;        # option nat : pair nat (pair address nat) : big_map (pair nat (pair address nat)) nat : big_map (pair (address %amm) (nat %epoch)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            IF_NONE
              {
                PUSH int 184; # int : pair nat (pair address nat) : big_map (pair nat (pair address nat)) nat : big_map (pair (address %amm) (nat %epoch)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                FAILWITH;   # FAILED
              }
              {}; # @some : pair nat (pair address nat) : big_map (pair nat (pair address nat)) nat : big_map (pair (address %amm) (nat %epoch)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            DUP 7;      # pair (address %amm) (nat %votes) : @some : pair nat (pair address nat) : big_map (pair nat (pair address nat)) nat : big_map (pair (address %amm) (nat %epoch)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            CDR;        # nat : @some : pair nat (pair address nat) : big_map (pair nat (pair address nat)) nat : big_map (pair (address %amm) (nat %epoch)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            ADD;        # nat : pair nat (pair address nat) : big_map (pair nat (pair address nat)) nat : big_map (pair (address %amm) (nat %epoch)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            SOME;       # option nat : pair nat (pair address nat) : big_map (pair nat (pair address nat)) nat : big_map (pair (address %amm) (nat %epoch)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            SWAP;       # pair nat (pair address nat) : option nat : big_map (pair nat (pair address nat)) nat : big_map (pair (address %amm) (nat %epoch)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            UPDATE;     # big_map (pair nat (pair address nat)) nat : big_map (pair (address %amm) (nat %epoch)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            PAIR;       # pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat) : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            PAIR;       # pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            SWAP;       # pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            PAIR;       # pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            # if ~ (self.data.total_amm_votes.contains(sp.record(amm = vote_item.amm, epoch = self.data.epoch))): # pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            DUP;        # pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            GET 3;      # pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat) : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            CDR;        # big_map (pair (address %amm) (nat %epoch)) nat : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            SWAP;       # pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : big_map (pair (address %amm) (nat %epoch)) nat : pair (address %amm) (nat %votes) : @some : @parameter%vote
            DUP;        # pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : big_map (pair (address %amm) (nat %epoch)) nat : pair (address %amm) (nat %votes) : @some : @parameter%vote
            DUG 5;      # pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : big_map (pair (address %amm) (nat %epoch)) nat : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            CAR;        # pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : big_map (pair (address %amm) (nat %epoch)) nat : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            GET 3;      # nat : big_map (pair (address %amm) (nat %epoch)) nat : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            DUP 3;      # pair (address %amm) (nat %votes) : nat : big_map (pair (address %amm) (nat %epoch)) nat : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            CAR;        # address : nat : big_map (pair (address %amm) (nat %epoch)) nat : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            PAIR;       # pair address nat : big_map (pair (address %amm) (nat %epoch)) nat : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            MEM;        # bool : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            IF
              {}
              {
                # self.data.total_amm_votes[sp.record(amm = vote_item.amm, epoch = self.data.epoch)] = 0 # pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                DUP 4;      # pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                UNPAIR;     # pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                SWAP;       # pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                UNPAIR;     # pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat) : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                UNPAIR;     # big_map (pair nat (pair address nat)) nat : big_map (pair (address %amm) (nat %epoch)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                SWAP;       # big_map (pair (address %amm) (nat %epoch)) nat : big_map (pair nat (pair address nat)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                PUSH (option nat) (Some 0); # option nat : big_map (pair (address %amm) (nat %epoch)) nat : big_map (pair nat (pair address nat)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                DIG 8;      # pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : option nat : big_map (pair (address %amm) (nat %epoch)) nat : big_map (pair nat (pair address nat)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                CAR;        # pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : option nat : big_map (pair (address %amm) (nat %epoch)) nat : big_map (pair nat (pair address nat)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                GET 3;      # nat : option nat : big_map (pair (address %amm) (nat %epoch)) nat : big_map (pair nat (pair address nat)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                DUP 7;      # pair (address %amm) (nat %votes) : nat : option nat : big_map (pair (address %amm) (nat %epoch)) nat : big_map (pair nat (pair address nat)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                CAR;        # address : nat : option nat : big_map (pair (address %amm) (nat %epoch)) nat : big_map (pair nat (pair address nat)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                PAIR;       # pair address nat : option nat : big_map (pair (address %amm) (nat %epoch)) nat : big_map (pair nat (pair address nat)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                UPDATE;     # big_map (pair address nat) nat : big_map (pair nat (pair address nat)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                SWAP;       # big_map (pair nat (pair address nat)) nat : big_map (pair address nat) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                PAIR;       # pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat) : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                PAIR;       # pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                SWAP;       # pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                PAIR;       # pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                DUG 3;      # pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
              }; # pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            # self.data.total_amm_votes[sp.record(amm = vote_item.amm, epoch = self.data.epoch)] += vote_item.votes # pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            DUP 4;      # pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            UNPAIR;     # pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            SWAP;       # pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            UNPAIR;     # pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat) : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            UNPAIR;     # big_map (pair nat (pair address nat)) nat : big_map (pair address nat) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            SWAP;       # big_map (pair address nat) nat : big_map (pair nat (pair address nat)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            DUP;        # big_map (pair address nat) nat : big_map (pair address nat) nat : big_map (pair nat (pair address nat)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            DIG 8;      # pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : big_map (pair address nat) nat : big_map (pair address nat) nat : big_map (pair nat (pair address nat)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            CAR;        # pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : big_map (pair address nat) nat : big_map (pair address nat) nat : big_map (pair nat (pair address nat)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            GET 3;      # nat : big_map (pair address nat) nat : big_map (pair address nat) nat : big_map (pair nat (pair address nat)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            DUP 7;      # pair (address %amm) (nat %votes) : nat : big_map (pair address nat) nat : big_map (pair address nat) nat : big_map (pair nat (pair address nat)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            CAR;        # address : nat : big_map (pair address nat) nat : big_map (pair address nat) nat : big_map (pair nat (pair address nat)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            PAIR;       # pair address nat : big_map (pair address nat) nat : big_map (pair address nat) nat : big_map (pair nat (pair address nat)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            DUP;        # pair address nat : pair address nat : big_map (pair address nat) nat : big_map (pair address nat) nat : big_map (pair nat (pair address nat)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            DUG 2;      # pair address nat : big_map (pair address nat) nat : pair address nat : big_map (pair address nat) nat : big_map (pair nat (pair address nat)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            GET;        # option nat : pair address nat : big_map (pair address nat) nat : big_map (pair nat (pair address nat)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            IF_NONE
              {
                PUSH int 190; # int : pair address nat : big_map (pair address nat) nat : big_map (pair nat (pair address nat)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                FAILWITH;   # FAILED
              }
              {}; # @some : pair address nat : big_map (pair address nat) nat : big_map (pair nat (pair address nat)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            DUP 7;      # pair (address %amm) (nat %votes) : @some : pair address nat : big_map (pair address nat) nat : big_map (pair nat (pair address nat)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            CDR;        # nat : @some : pair address nat : big_map (pair address nat) nat : big_map (pair nat (pair address nat)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            ADD;        # nat : pair address nat : big_map (pair address nat) nat : big_map (pair nat (pair address nat)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            SOME;       # option nat : pair address nat : big_map (pair address nat) nat : big_map (pair nat (pair address nat)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            SWAP;       # pair address nat : option nat : big_map (pair address nat) nat : big_map (pair nat (pair address nat)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            UPDATE;     # big_map (pair address nat) nat : big_map (pair nat (pair address nat)) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            SWAP;       # big_map (pair nat (pair address nat)) nat : big_map (pair address nat) nat : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            PAIR;       # pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat) : pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            PAIR;       # pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            SWAP;       # pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            PAIR;       # pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            # if ~ (self.data.total_token_votes.contains(sp.record(token_id = params.token_id, epoch = self.data.epoch))): # pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            DUP;        # pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            GET 5;      # big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            SWAP;       # pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (address %amm) (nat %votes) : @some : @parameter%vote
            DUP;        # pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (address %amm) (nat %votes) : @some : @parameter%vote
            DUG 5;      # pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            CAR;        # pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            GET 3;      # nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            DUP 5;      # @parameter%vote : nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            CAR;        # nat : nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            PAIR;       # pair nat nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            MEM;        # bool : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            IF
              {}
              {
                # self.data.total_token_votes[sp.record(token_id = params.token_id, epoch = self.data.epoch)] = 0 # pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                DUP 4;      # pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                DUP;        # pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                GET 5;      # big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                PUSH (option nat) (Some 0); # option nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                DIG 6;      # pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : option nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                CAR;        # pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : option nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                GET 3;      # nat : option nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                DUP 7;      # @parameter%vote : nat : option nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                CAR;        # nat : nat : option nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                PAIR;       # pair nat nat : option nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                UPDATE;     # big_map (pair nat nat) nat : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                UPDATE 5;   # pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                DUG 3;      # pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
              }; # pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            # self.data.total_token_votes[sp.record(token_id = params.token_id, epoch = self.data.epoch)] += vote_item.votes # pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            DUP 4;      # pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            DUP;        # pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            GET 5;      # big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            DUP;        # big_map (pair (nat %token_id) (nat %epoch)) nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            DIG 6;      # pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : big_map (pair (nat %token_id) (nat %epoch)) nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            CAR;        # pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp)) : big_map (pair (nat %token_id) (nat %epoch)) nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            GET 3;      # nat : big_map (pair (nat %token_id) (nat %epoch)) nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            DUP 7;      # @parameter%vote : nat : big_map (pair (nat %token_id) (nat %epoch)) nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            CAR;        # nat : nat : big_map (pair (nat %token_id) (nat %epoch)) nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            PAIR;       # pair nat nat : big_map (pair (nat %token_id) (nat %epoch)) nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            DUP;        # pair nat nat : pair nat nat : big_map (pair (nat %token_id) (nat %epoch)) nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            DUG 2;      # pair nat nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair nat nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            GET;        # option nat : pair nat nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            IF_NONE
              {
                PUSH int 196; # int : pair nat nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
                FAILWITH;   # FAILED
              }
              {}; # @some : pair nat nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            DUP 5;      # pair (address %amm) (nat %votes) : @some : pair nat nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            CDR;        # nat : @some : pair nat nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            ADD;        # nat : pair nat nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            SOME;       # option nat : pair nat nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            SWAP;       # pair nat nat : option nat : big_map (pair (nat %token_id) (nat %epoch)) nat : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            UPDATE;     # big_map (pair nat nat) nat : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            UPDATE 5;   # pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))) : pair (address %amm) (nat %votes) : @some : @parameter%vote
            DUG 3;      # pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            # power_used.value = sp.as_nat(power_used.value - vote_item.votes, message = 'NOT_ENOUGH_VOTING_POWER_AVAILABLE') # pair (address %amm) (nat %votes) : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            CDR;        # nat : @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            SWAP;       # @some : nat : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            SUB;        # int : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            ISNAT;      # option nat : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
            IF_NONE
              {
                PUSH string "NOT_ENOUGH_VOTING_POWER_AVAILABLE"; # string : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
                FAILWITH;   # FAILED
              }
              {}; # @some : @parameter%vote : pair (pair (big_map %distributors address (pair (address %gauge) (address %bribe))) (pair (nat %epoch) (big_map %epoch_end nat timestamp))) (pair (pair (big_map (pair nat (pair address nat)) nat) (big_map (pair address nat) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
          }; # @some : @parameter%vote : @storage
        DROP 2;     # @storage
      }; # pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
    NIL operation; # list operation : pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address)))
    PAIR;       # pair (list operation) (pair (pair (big_map address (pair (address %gauge) (address %bribe))) (pair nat (big_map nat timestamp))) (pair (pair (big_map %token_amm_votes (pair (nat %token_id) (pair (address %amm) (nat %epoch))) nat) (big_map %total_amm_votes (pair (address %amm) (nat %epoch)) nat)) (pair (big_map %total_token_votes (pair (nat %token_id) (nat %epoch)) nat) (address %ve_address))))
  };